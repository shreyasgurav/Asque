"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/bots/by-owner/[ownerId]";
exports.ids = ["pages/api/bots/by-owner/[ownerId]"];
exports.modules = {

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/auth":
/*!**************************************!*\
  !*** external "firebase-admin/auth" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/auth");

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/firestore");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("firebase/firestore");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/bots/by-owner/[ownerId].ts */ \"(api)/./pages/api/bots/by-owner/[ownerId].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/bots/by-owner/[ownerId]\",\n        pathname: \"/api/bots/by-owner/[ownerId]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_bots_by_owner_ownerId_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmJvdHMlMkZieS1vd25lciUyRiU1Qm93bmVySWQlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmJvdHMlMkZieS1vd25lciUyRiU1Qm93bmVySWQlNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGdFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxnRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3F1ZS1ib3QtcGxhdGZvcm0vPzZkYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9ib3RzL2J5LW93bmVyL1tvd25lcklkXS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2JvdHMvYnktb3duZXIvW293bmVySWRdXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYm90cy9ieS1vd25lci9bb3duZXJJZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth/server.ts":
/*!****************************!*\
  !*** ./lib/auth/server.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateRequest: () => (/* binding */ authenticateRequest),\n/* harmony export */   verifyAuthToken: () => (/* binding */ verifyAuthToken),\n/* harmony export */   verifyBotOwnership: () => (/* binding */ verifyBotOwnership),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withBotOwnership: () => (/* binding */ withBotOwnership)\n/* harmony export */ });\n/* harmony import */ var firebase_admin_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin/auth */ \"firebase-admin/auth\");\n/* harmony import */ var firebase_admin_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Initialize Firebase Admin if not already initialized\nif (!(0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.getApps)().length) {\n    const privateKey = process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\");\n    if (process.env.FIREBASE_PROJECT_ID && process.env.FIREBASE_CLIENT_EMAIL && privateKey) {\n        (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.initializeApp)({\n            credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.cert)({\n                projectId: process.env.FIREBASE_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n                privateKey: privateKey\n            })\n        });\n        console.log(\"\\uD83D\\uDD25 Firebase Admin initialized\");\n    } else {\n        console.warn(\"⚠️ Firebase Admin not initialized - missing environment variables\");\n    }\n}\n// Extract auth token from request headers\nconst getAuthToken = (req)=>{\n    const authHeader = req.headers.authorization;\n    if (authHeader && authHeader.startsWith(\"Bearer \")) {\n        return authHeader.substring(7);\n    }\n    // Also check for token in cookies (for browser requests)\n    const tokenFromCookie = req.cookies[\"auth-token\"];\n    if (tokenFromCookie) {\n        return tokenFromCookie;\n    }\n    return null;\n};\n// Verify Firebase auth token and return user info\nconst verifyAuthToken = async (token)=>{\n    try {\n        // In development mode, if Firebase is not configured, allow test tokens\n        if ( true && !(0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.getApps)().length) {\n            console.log(\"\\uD83D\\uDD27 Development mode: Using test authentication\");\n            // Allow test tokens for development\n            if (token === \"test-token\") {\n                return {\n                    uid: \"JxNSv886lwN8CYMdqAityIbtFA43\",\n                    email: \"test@example.com\",\n                    phoneNumber: \"+911234567890\"\n                };\n            }\n            // Allow any token that starts with 'dev-'\n            if (token.startsWith(\"dev-\")) {\n                const uid = token.replace(\"dev-\", \"\");\n                return {\n                    uid,\n                    email: `${uid}@example.com`,\n                    phoneNumber: \"+911234567890\"\n                };\n            }\n        }\n        const auth = (0,firebase_admin_auth__WEBPACK_IMPORTED_MODULE_0__.getAuth)();\n        const decodedToken = await auth.verifyIdToken(token);\n        return {\n            uid: decodedToken.uid,\n            email: decodedToken.email,\n            phoneNumber: decodedToken.phone_number\n        };\n    } catch (error) {\n        console.error(\"❌ Token verification failed:\", error);\n        throw new Error(\"Invalid authentication token\");\n    }\n};\n// Middleware function to authenticate API requests\nconst authenticateRequest = async (req, res)=>{\n    try {\n        const token = getAuthToken(req);\n        if (!token) {\n            res.status(401).json({\n                success: false,\n                error: \"Authentication required\",\n                timestamp: new Date()\n            });\n            return null;\n        }\n        const user = await verifyAuthToken(token);\n        return user;\n    } catch (error) {\n        console.error(\"❌ Authentication error:\", error);\n        res.status(401).json({\n            success: false,\n            error: \"Invalid authentication credentials\",\n            timestamp: new Date()\n        });\n        return null;\n    }\n};\n// Higher-order function to wrap API handlers with authentication\nconst withAuth = (handler)=>{\n    return async (req, res)=>{\n        const user = await authenticateRequest(req, res);\n        if (!user) {\n            // Response already sent by authenticateRequest\n            return;\n        }\n        // Add user to request object\n        req.user = user;\n        // Call the original handler\n        return handler(req, res);\n    };\n};\n// Verify bot ownership (now with phone number fallback)\nconst verifyBotOwnership = async (botId, userId, userPhoneNumber)=>{\n    try {\n        // Import here to avoid circular dependency\n        const { serverDb } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/database */ \"(api)/./lib/database/index.ts\"));\n        const bot = await serverDb.getBot(botId);\n        if (!bot) {\n            return false;\n        }\n        // Direct ownership check\n        if (bot.ownerId === userId) {\n            return true;\n        }\n        // Phone number fallback\n        if (userPhoneNumber && bot.ownerPhoneNumber === userPhoneNumber) {\n            console.log(\"✅ Bot ownership verified via phone number fallback\");\n            // Update the bot's ownerId for future consistency\n            bot.ownerId = userId;\n            await serverDb.updateBot(bot);\n            return true;\n        }\n        return false;\n    } catch (error) {\n        console.error(\"❌ Error verifying bot ownership:\", error);\n        return false;\n    }\n};\n// Middleware to verify bot ownership for bot-specific operations\nconst withBotOwnership = (handler)=>{\n    return withAuth(async (req, res)=>{\n        const { botId } = req.query;\n        if (!botId || typeof botId !== \"string\") {\n            return res.status(400).json({\n                success: false,\n                error: \"Bot ID is required\",\n                timestamp: new Date()\n            });\n        }\n        const isOwner = await verifyBotOwnership(botId, req.user.uid, req.user.phoneNumber);\n        if (!isOwner) {\n            return res.status(403).json({\n                success: false,\n                error: \"Access denied: You do not own this bot\",\n                timestamp: new Date()\n            });\n        }\n        return handler(req, res);\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VixJQUFJQyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVE4sT0FBTztnQkFDUE8sV0FBVyxJQUFJQztZQUNqQjtRQUNGO1FBRUEsTUFBTWdCLFVBQVUsTUFBTVosbUJBQW1CQyxPQUFPOUIsSUFBSTBCLElBQUksQ0FBQ2hCLEdBQUcsRUFBRVYsSUFBSTBCLElBQUksQ0FBQ2QsV0FBVztRQUVsRixJQUFJLENBQUM2QixTQUFTO1lBQ1osT0FBT3JCLElBQUlDLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUTixPQUFPO2dCQUNQTyxXQUFXLElBQUlDO1lBQ2pCO1FBQ0Y7UUFFQSxPQUFPRyxRQUFRNUIsS0FBS29CO0lBQ3RCO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FzcXVlLWJvdC1wbGF0Zm9ybS8uL2xpYi9hdXRoL3NlcnZlci50cz85MjYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9hdXRoJztcbmltcG9ydCB7IGluaXRpYWxpemVBcHAsIGdldEFwcHMsIGNlcnQgfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9hcHAnO1xuXG4vLyBJbml0aWFsaXplIEZpcmViYXNlIEFkbWluIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG5pZiAoIWdldEFwcHMoKS5sZW5ndGgpIHtcbiAgY29uc3QgcHJpdmF0ZUtleSA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZPy5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyk7XG4gIFxuICBpZiAocHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCAmJiBwcm9jZXNzLmVudi5GSVJFQkFTRV9DTElFTlRfRU1BSUwgJiYgcHJpdmF0ZUtleSkge1xuICAgIGluaXRpYWxpemVBcHAoe1xuICAgICAgY3JlZGVudGlhbDogY2VydCh7XG4gICAgICAgIHByb2plY3RJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgICAgICAgY2xpZW50RW1haWw6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCxcbiAgICAgICAgcHJpdmF0ZUtleTogcHJpdmF0ZUtleSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCfwn5SlIEZpcmViYXNlIEFkbWluIGluaXRpYWxpemVkJyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKCfimqDvuI8gRmlyZWJhc2UgQWRtaW4gbm90IGluaXRpYWxpemVkIC0gbWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRVc2VyIHtcbiAgdWlkOiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICBwaG9uZU51bWJlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGVkUmVxdWVzdCBleHRlbmRzIE5leHRBcGlSZXF1ZXN0IHtcbiAgdXNlcjogQXV0aGVudGljYXRlZFVzZXI7XG59XG5cbi8vIEV4dHJhY3QgYXV0aCB0b2tlbiBmcm9tIHJlcXVlc3QgaGVhZGVyc1xuY29uc3QgZ2V0QXV0aFRva2VuID0gKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gIFxuICBpZiAoYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgIHJldHVybiBhdXRoSGVhZGVyLnN1YnN0cmluZyg3KTtcbiAgfVxuICBcbiAgLy8gQWxzbyBjaGVjayBmb3IgdG9rZW4gaW4gY29va2llcyAoZm9yIGJyb3dzZXIgcmVxdWVzdHMpXG4gIGNvbnN0IHRva2VuRnJvbUNvb2tpZSA9IHJlcS5jb29raWVzWydhdXRoLXRva2VuJ107XG4gIGlmICh0b2tlbkZyb21Db29raWUpIHtcbiAgICByZXR1cm4gdG9rZW5Gcm9tQ29va2llO1xuICB9XG4gIFxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIFZlcmlmeSBGaXJlYmFzZSBhdXRoIHRva2VuIGFuZCByZXR1cm4gdXNlciBpbmZvXG5leHBvcnQgY29uc3QgdmVyaWZ5QXV0aFRva2VuID0gYXN5bmMgKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhlbnRpY2F0ZWRVc2VyPiA9PiB7XG4gIHRyeSB7XG4gICAgLy8gSW4gZGV2ZWxvcG1lbnQgbW9kZSwgaWYgRmlyZWJhc2UgaXMgbm90IGNvbmZpZ3VyZWQsIGFsbG93IHRlc3QgdG9rZW5zXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmICFnZXRBcHBzKCkubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UpyBEZXZlbG9wbWVudCBtb2RlOiBVc2luZyB0ZXN0IGF1dGhlbnRpY2F0aW9uJyk7XG4gICAgICBcbiAgICAgIC8vIEFsbG93IHRlc3QgdG9rZW5zIGZvciBkZXZlbG9wbWVudFxuICAgICAgaWYgKHRva2VuID09PSAndGVzdC10b2tlbicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1aWQ6ICdKeE5Tdjg4Nmx3TjhDWU1kcUFpdHlJYnRGQTQzJywgLy8gVXNlIHRoZSBleGlzdGluZyB1c2VyIElEIGZyb20gbW9jayBkYXRhXG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZU51bWJlcjogJys5MTEyMzQ1Njc4OTAnLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbGxvdyBhbnkgdG9rZW4gdGhhdCBzdGFydHMgd2l0aCAnZGV2LSdcbiAgICAgIGlmICh0b2tlbi5zdGFydHNXaXRoKCdkZXYtJykpIHtcbiAgICAgICAgY29uc3QgdWlkID0gdG9rZW4ucmVwbGFjZSgnZGV2LScsICcnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1aWQsXG4gICAgICAgICAgZW1haWw6IGAke3VpZH1AZXhhbXBsZS5jb21gLFxuICAgICAgICAgIHBob25lTnVtYmVyOiAnKzkxMTIzNDU2Nzg5MCcsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKCk7XG4gICAgY29uc3QgZGVjb2RlZFRva2VuID0gYXdhaXQgYXV0aC52ZXJpZnlJZFRva2VuKHRva2VuKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdWlkOiBkZWNvZGVkVG9rZW4udWlkLFxuICAgICAgZW1haWw6IGRlY29kZWRUb2tlbi5lbWFpbCxcbiAgICAgIHBob25lTnVtYmVyOiBkZWNvZGVkVG9rZW4ucGhvbmVfbnVtYmVyLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFRva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbicpO1xuICB9XG59O1xuXG4vLyBNaWRkbGV3YXJlIGZ1bmN0aW9uIHRvIGF1dGhlbnRpY2F0ZSBBUEkgcmVxdWVzdHNcbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGVSZXF1ZXN0ID0gYXN5bmMgKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlciB8IG51bGw+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbihyZXEpO1xuICAgIFxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlBdXRoVG9rZW4odG9rZW4pO1xuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBBdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ludmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIEhpZ2hlci1vcmRlciBmdW5jdGlvbiB0byB3cmFwIEFQSSBoYW5kbGVycyB3aXRoIGF1dGhlbnRpY2F0aW9uXG5leHBvcnQgY29uc3Qgd2l0aEF1dGggPSAoXG4gIGhhbmRsZXI6IChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPlxuKSA9PiB7XG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgYXV0aGVudGljYXRlUmVxdWVzdChyZXEsIHJlcyk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAvLyBSZXNwb25zZSBhbHJlYWR5IHNlbnQgYnkgYXV0aGVudGljYXRlUmVxdWVzdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgdXNlciB0byByZXF1ZXN0IG9iamVjdFxuICAgIChyZXEgYXMgQXV0aGVudGljYXRlZFJlcXVlc3QpLnVzZXIgPSB1c2VyO1xuICAgIFxuICAgIC8vIENhbGwgdGhlIG9yaWdpbmFsIGhhbmRsZXJcbiAgICByZXR1cm4gaGFuZGxlcihyZXEgYXMgQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlcyk7XG4gIH07XG59O1xuXG4vLyBWZXJpZnkgYm90IG93bmVyc2hpcCAobm93IHdpdGggcGhvbmUgbnVtYmVyIGZhbGxiYWNrKVxuZXhwb3J0IGNvbnN0IHZlcmlmeUJvdE93bmVyc2hpcCA9IGFzeW5jIChcbiAgYm90SWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHVzZXJQaG9uZU51bWJlcj86IHN0cmluZ1xuKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIHRyeSB7XG4gICAgLy8gSW1wb3J0IGhlcmUgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeVxuICAgIGNvbnN0IHsgc2VydmVyRGIgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvZGF0YWJhc2UnKTtcbiAgICBjb25zdCBib3QgPSBhd2FpdCBzZXJ2ZXJEYi5nZXRCb3QoYm90SWQpO1xuICAgIFxuICAgIGlmICghYm90KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIERpcmVjdCBvd25lcnNoaXAgY2hlY2tcbiAgICBpZiAoYm90Lm93bmVySWQgPT09IHVzZXJJZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFBob25lIG51bWJlciBmYWxsYmFja1xuICAgIGlmICh1c2VyUGhvbmVOdW1iZXIgJiYgYm90Lm93bmVyUGhvbmVOdW1iZXIgPT09IHVzZXJQaG9uZU51bWJlcikge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBCb3Qgb3duZXJzaGlwIHZlcmlmaWVkIHZpYSBwaG9uZSBudW1iZXIgZmFsbGJhY2snKTtcbiAgICAgIC8vIFVwZGF0ZSB0aGUgYm90J3Mgb3duZXJJZCBmb3IgZnV0dXJlIGNvbnNpc3RlbmN5XG4gICAgICBib3Qub3duZXJJZCA9IHVzZXJJZDtcbiAgICAgIGF3YWl0IHNlcnZlckRiLnVwZGF0ZUJvdChib3QpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgdmVyaWZ5aW5nIGJvdCBvd25lcnNoaXA6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gTWlkZGxld2FyZSB0byB2ZXJpZnkgYm90IG93bmVyc2hpcCBmb3IgYm90LXNwZWNpZmljIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCB3aXRoQm90T3duZXJzaGlwID0gKFxuICBoYW5kbGVyOiAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD5cbikgPT4ge1xuICByZXR1cm4gd2l0aEF1dGgoYXN5bmMgKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgY29uc3QgeyBib3RJZCB9ID0gcmVxLnF1ZXJ5O1xuICAgIFxuICAgIGlmICghYm90SWQgfHwgdHlwZW9mIGJvdElkICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnQm90IElEIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXNPd25lciA9IGF3YWl0IHZlcmlmeUJvdE93bmVyc2hpcChib3RJZCwgcmVxLnVzZXIudWlkLCByZXEudXNlci5waG9uZU51bWJlcik7XG4gICAgXG4gICAgaWYgKCFpc093bmVyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkOiBZb3UgZG8gbm90IG93biB0aGlzIGJvdCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcbiAgfSk7XG59OyAiXSwibmFtZXMiOlsiZ2V0QXV0aCIsImluaXRpYWxpemVBcHAiLCJnZXRBcHBzIiwiY2VydCIsImxlbmd0aCIsInByaXZhdGVLZXkiLCJwcm9jZXNzIiwiZW52IiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJyZXBsYWNlIiwiRklSRUJBU0VfUFJPSkVDVF9JRCIsIkZJUkVCQVNFX0NMSUVOVF9FTUFJTCIsImNyZWRlbnRpYWwiLCJwcm9qZWN0SWQiLCJjbGllbnRFbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZ2V0QXV0aFRva2VuIiwicmVxIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsInRva2VuRnJvbUNvb2tpZSIsImNvb2tpZXMiLCJ2ZXJpZnlBdXRoVG9rZW4iLCJ0b2tlbiIsInVpZCIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJhdXRoIiwiZGVjb2RlZFRva2VuIiwidmVyaWZ5SWRUb2tlbiIsInBob25lX251bWJlciIsImVycm9yIiwiRXJyb3IiLCJhdXRoZW50aWNhdGVSZXF1ZXN0IiwicmVzIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidXNlciIsIndpdGhBdXRoIiwiaGFuZGxlciIsInZlcmlmeUJvdE93bmVyc2hpcCIsImJvdElkIiwidXNlcklkIiwidXNlclBob25lTnVtYmVyIiwic2VydmVyRGIiLCJib3QiLCJnZXRCb3QiLCJvd25lcklkIiwib3duZXJQaG9uZU51bWJlciIsInVwZGF0ZUJvdCIsIndpdGhCb3RPd25lcnNoaXAiLCJxdWVyeSIsImlzT3duZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/auth/server.ts\n");

/***/ }),

/***/ "(api)/./lib/database/index.ts":
/*!*******************************!*\
  !*** ./lib/database/index.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientDb: () => (/* binding */ clientDb),\n/* harmony export */   serverDb: () => (/* binding */ serverDb)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebase */ \"(api)/./lib/firebase.ts\");\n/* harmony import */ var _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/firebase-admin */ \"(api)/./lib/firebase-admin.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _lib_firebase__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _lib_firebase__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n// Mock database file paths\nconst DEV_DATA_DIR = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \".dev-data\");\nconst BOTS_FILE = path__WEBPACK_IMPORTED_MODULE_4___default().join(DEV_DATA_DIR, \"bots.json\");\nconst CHAT_SESSIONS_FILE = path__WEBPACK_IMPORTED_MODULE_4___default().join(DEV_DATA_DIR, \"chatSessions.json\");\nconst UNANSWERED_QUESTIONS_FILE = path__WEBPACK_IMPORTED_MODULE_4___default().join(DEV_DATA_DIR, \"unansweredQuestions.json\");\n// Ensure dev data directory exists\nif (!fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(DEV_DATA_DIR)) {\n    fs__WEBPACK_IMPORTED_MODULE_3___default().mkdirSync(DEV_DATA_DIR, {\n        recursive: true\n    });\n}\n// Mock database helper functions\nconst loadMockData = (filePath)=>{\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(filePath)) {\n            const data = fs__WEBPACK_IMPORTED_MODULE_3___default().readFileSync(filePath, \"utf-8\");\n            return JSON.parse(data);\n        }\n    } catch (error) {\n        console.warn(`Could not read ${filePath}:`, error);\n    }\n    return {};\n};\nconst saveMockData = (filePath, data)=>{\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_3___default().writeFileSync(filePath, JSON.stringify(data, null, 2));\n    } catch (error) {\n        console.error(`Could not save to ${filePath}:`, error);\n    }\n};\n// Client-side database operations (for frontend)\nconst clientDb = {\n    // Get bot data\n    async getBot (botId) {\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"bots\", botId);\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n            if (docSnap.exists()) {\n                return {\n                    id: docSnap.id,\n                    ...docSnap.data()\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching bot:\", error);\n            return null;\n        }\n    },\n    // Add chat session\n    async addChatSession (sessionData) {\n        try {\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"chatSessions\"), sessionData);\n            return docRef.id;\n        } catch (error) {\n            console.error(\"Error adding chat session:\", error);\n            return null;\n        }\n    }\n};\n// Helper function to calculate analytics\nconst calculateAnalytics = (sessions)=>{\n    const totalVisitors = sessions.length;\n    const totalChats = sessions.reduce((sum, session)=>sum + session.messageCount, 0);\n    const totalMessages = sessions.reduce((sum, session)=>sum + session.messages.length, 0);\n    const averageResponseTime = sessions.length > 0 ? sessions.reduce((sum, session)=>sum + (session.averageResponseTime || 0), 0) / sessions.length : 0;\n    const successfulResponses = sessions.reduce((sum, session)=>sum + session.successfulResponses, 0);\n    const failedQuestions = sessions.reduce((sum, session)=>sum + session.failedQuestions, 0);\n    return {\n        totalVisitors,\n        totalChats,\n        totalMessages,\n        averageResponseTime,\n        successfulResponses,\n        failedQuestions,\n        successRate: totalMessages > 0 ? successfulResponses / totalMessages * 100 : 0,\n        dailyVisitors: [],\n        weeklyChats: [],\n        topQuestions: [],\n        responseTimeHistory: []\n    };\n};\n// Server-side database operations (for API routes)\nconst serverDb = {\n    // Get bot by ID\n    async getBot (botId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            const bot = bots[botId];\n            if (bot) {\n                return {\n                    ...bot,\n                    createdAt: new Date(bot.createdAt),\n                    updatedAt: new Date(bot.updatedAt),\n                    deployedAt: bot.deployedAt ? new Date(bot.deployedAt) : undefined\n                };\n            }\n            return null;\n        }\n        try {\n            const docRef = _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").doc(botId);\n            const docSnap = await docRef.get();\n            if (docSnap.exists) {\n                return {\n                    id: docSnap.id,\n                    ...docSnap.data()\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching bot from Firebase:\", error);\n            return null;\n        }\n    },\n    // Get bot with analytics\n    async getBotWithAnalytics (botId) {\n        const bot = await this.getBot(botId);\n        if (!bot) return null;\n        const sessions = await this.getChatSessionsByBot(botId);\n        bot.analytics = calculateAnalytics(sessions);\n        return bot;\n    },\n    // Create new bot\n    async createBot (botData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            const cleanBotData = {\n                ...botData,\n                description: botData.description || \"\",\n                deployedAt: botData.deployedAt || null,\n                profilePictureUrl: botData.profilePictureUrl || null,\n                welcomeMessage: botData.welcomeMessage || null\n            };\n            bots[botData.id] = cleanBotData;\n            saveMockData(BOTS_FILE, bots);\n            return botData;\n        }\n        try {\n            const cleanBotData = {\n                ...botData,\n                description: botData.description || \"\",\n                deployedAt: botData.deployedAt || null,\n                profilePictureUrl: botData.profilePictureUrl || null,\n                welcomeMessage: botData.welcomeMessage || null\n            };\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").doc(botData.id).set(cleanBotData);\n            return botData;\n        } catch (error) {\n            console.error(\"Error saving bot to Firebase:\", error);\n            throw error;\n        }\n    },\n    // Update bot\n    async updateBot (botData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            const cleanBotData = {\n                ...botData,\n                description: botData.description || \"\",\n                deployedAt: botData.deployedAt || null,\n                profilePictureUrl: botData.profilePictureUrl || null,\n                welcomeMessage: botData.welcomeMessage || null\n            };\n            bots[botData.id] = cleanBotData;\n            saveMockData(BOTS_FILE, bots);\n            return botData;\n        }\n        try {\n            const cleanBotData = {\n                ...botData,\n                description: botData.description || \"\",\n                deployedAt: botData.deployedAt || null,\n                profilePictureUrl: botData.profilePictureUrl || null,\n                welcomeMessage: botData.welcomeMessage || null\n            };\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").doc(botData.id).set(cleanBotData);\n            return botData;\n        } catch (error) {\n            console.error(\"Error updating bot in Firebase:\", error);\n            throw error;\n        }\n    },\n    // Get bots by owner ID\n    async getBotsByOwner (ownerId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            const userBots = [];\n            Object.values(bots).forEach((bot)=>{\n                if (bot.ownerId === ownerId) {\n                    userBots.push({\n                        ...bot,\n                        createdAt: new Date(bot.createdAt),\n                        updatedAt: new Date(bot.updatedAt),\n                        deployedAt: bot.deployedAt ? new Date(bot.deployedAt) : undefined\n                    });\n                }\n            });\n            // Sort by createdAt descending\n            return userBots.sort((a, b)=>b.createdAt.getTime() - a.createdAt.getTime());\n        }\n        try {\n            const querySnapshot = await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").where(\"ownerId\", \"==\", ownerId).orderBy(\"createdAt\", \"desc\").get();\n            const firebaseBots = [];\n            querySnapshot.forEach((doc)=>{\n                firebaseBots.push({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            return firebaseBots;\n        } catch (error) {\n            console.error(\"Error fetching bots by owner from Firebase:\", error);\n            return [];\n        }\n    },\n    // Get bots by phone number\n    async getBotsByPhoneNumber (phoneNumber) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            const phoneBots = [];\n            Object.values(bots).forEach((bot)=>{\n                if (bot.ownerPhoneNumber === phoneNumber) {\n                    phoneBots.push({\n                        ...bot,\n                        createdAt: new Date(bot.createdAt),\n                        updatedAt: new Date(bot.updatedAt),\n                        deployedAt: bot.deployedAt ? new Date(bot.deployedAt) : undefined\n                    });\n                }\n            });\n            // Sort by createdAt descending\n            return phoneBots.sort((a, b)=>b.createdAt.getTime() - a.createdAt.getTime());\n        }\n        try {\n            const querySnapshot = await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").where(\"ownerPhoneNumber\", \"==\", phoneNumber).orderBy(\"createdAt\", \"desc\").get();\n            const firebaseBots = [];\n            querySnapshot.forEach((doc)=>{\n                firebaseBots.push({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            return firebaseBots;\n        } catch (error) {\n            console.error(\"Error fetching bots by phone from Firebase:\", error);\n            return [];\n        }\n    },\n    // Enhanced getBotsByOwner that also checks phone number as fallback\n    async getBotsByOwnerWithFallback (ownerId, phoneNumber) {\n        let bots = await this.getBotsByOwner(ownerId);\n        if (bots.length === 0 && phoneNumber) {\n            const phoneBots = await this.getBotsByPhoneNumber(phoneNumber);\n            if (phoneBots.length > 0) {\n                for (const bot of phoneBots){\n                    bot.ownerId = ownerId;\n                    await this.updateBot(bot);\n                }\n                bots = phoneBots;\n            }\n        }\n        return bots;\n    },\n    // Delete bot\n    async deleteBot (botId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const bots = loadMockData(BOTS_FILE);\n            if (bots[botId]) {\n                delete bots[botId];\n                saveMockData(BOTS_FILE, bots);\n                return true;\n            }\n            return false;\n        }\n        try {\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"bots\").doc(botId).delete();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting bot from Firebase:\", error);\n            return false;\n        }\n    },\n    // Chat Sessions Management\n    async createChatSession (sessionData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const sessions = loadMockData(CHAT_SESSIONS_FILE);\n            sessions[sessionData.id] = sessionData;\n            saveMockData(CHAT_SESSIONS_FILE, sessions);\n            return sessionData;\n        }\n        try {\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"chatSessions\").doc(sessionData.id).set(sessionData);\n            return sessionData;\n        } catch (error) {\n            console.error(\"Error saving chat session to Firebase:\", error);\n            throw error;\n        }\n    },\n    async updateChatSession (sessionData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const sessions = loadMockData(CHAT_SESSIONS_FILE);\n            sessions[sessionData.id] = sessionData;\n            saveMockData(CHAT_SESSIONS_FILE, sessions);\n            return sessionData;\n        }\n        try {\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"chatSessions\").doc(sessionData.id).set(sessionData);\n            return sessionData;\n        } catch (error) {\n            console.error(\"Error updating chat session in Firebase:\", error);\n            throw error;\n        }\n    },\n    async getChatSessionsByBot (botId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const sessions = loadMockData(CHAT_SESSIONS_FILE);\n            const botSessions = [];\n            Object.values(sessions).forEach((session)=>{\n                if (session.botId === botId) {\n                    botSessions.push({\n                        ...session,\n                        startedAt: new Date(session.startedAt),\n                        lastActivityAt: new Date(session.lastActivityAt)\n                    });\n                }\n            });\n            return botSessions.sort((a, b)=>b.lastActivityAt.getTime() - a.lastActivityAt.getTime());\n        }\n        try {\n            const querySnapshot = await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"chatSessions\").where(\"botId\", \"==\", botId).orderBy(\"lastActivityAt\", \"desc\").get();\n            const firebaseSessions = [];\n            querySnapshot.forEach((doc)=>{\n                firebaseSessions.push({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            return firebaseSessions;\n        } catch (error) {\n            console.error(\"Error fetching chat sessions by bot from Firebase:\", error);\n            return [];\n        }\n    },\n    async getChatSessionsByUser (userId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const sessions = loadMockData(CHAT_SESSIONS_FILE);\n            const userSessions = [];\n            Object.values(sessions).forEach((session)=>{\n                if (session.userId === userId && session.isAuthenticated) {\n                    userSessions.push({\n                        ...session,\n                        startedAt: new Date(session.startedAt),\n                        lastActivityAt: new Date(session.lastActivityAt)\n                    });\n                }\n            });\n            return userSessions.sort((a, b)=>b.lastActivityAt.getTime() - a.lastActivityAt.getTime());\n        }\n        try {\n            // Use simpler query to avoid complex composite index requirements\n            const querySnapshot = await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"chatSessions\").where(\"userId\", \"==\", userId).get();\n            const firebaseSessions = [];\n            querySnapshot.forEach((doc)=>{\n                const sessionData = doc.data();\n                // Filter for authenticated sessions in memory\n                if (sessionData.isAuthenticated === true) {\n                    firebaseSessions.push({\n                        id: doc.id,\n                        ...sessionData\n                    });\n                }\n            });\n            // Sort by lastActivityAt in memory (descending)\n            return firebaseSessions.sort((a, b)=>{\n                const aTime = a.lastActivityAt instanceof Date ? a.lastActivityAt : new Date(a.lastActivityAt);\n                const bTime = b.lastActivityAt instanceof Date ? b.lastActivityAt : new Date(b.lastActivityAt);\n                return bTime.getTime() - aTime.getTime();\n            });\n        } catch (error) {\n            console.error(\"Error fetching chat sessions by user from Firebase:\", error);\n            return [];\n        }\n    },\n    async getChatSession (sessionId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const sessions = loadMockData(CHAT_SESSIONS_FILE);\n            const session = sessions[sessionId];\n            if (session) {\n                return {\n                    ...session,\n                    startedAt: new Date(session.startedAt),\n                    lastActivityAt: new Date(session.lastActivityAt)\n                };\n            }\n            return null;\n        }\n        try {\n            const docRef = _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"chatSessions\").doc(sessionId);\n            const docSnap = await docRef.get();\n            if (docSnap.exists) {\n                return {\n                    id: docSnap.id,\n                    ...docSnap.data()\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching chat session from Firebase:\", error);\n            return null;\n        }\n    },\n    // Unanswered Questions Management\n    async createUnansweredQuestion (questionData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const questions = loadMockData(UNANSWERED_QUESTIONS_FILE);\n            questions[questionData.id] = questionData;\n            saveMockData(UNANSWERED_QUESTIONS_FILE, questions);\n            return questionData;\n        }\n        try {\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"unansweredQuestions\").doc(questionData.id).set(questionData);\n            return questionData;\n        } catch (error) {\n            console.error(\"Error saving unanswered question to Firebase:\", error);\n            throw error;\n        }\n    },\n    async updateUnansweredQuestion (questionData) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const questions = loadMockData(UNANSWERED_QUESTIONS_FILE);\n            questions[questionData.id] = questionData;\n            saveMockData(UNANSWERED_QUESTIONS_FILE, questions);\n            return questionData;\n        }\n        try {\n            await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"unansweredQuestions\").doc(questionData.id).set(questionData);\n            return questionData;\n        } catch (error) {\n            console.error(\"Error updating unanswered question in Firebase:\", error);\n            throw error;\n        }\n    },\n    async getUnansweredQuestionsByBot (botId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const questions = loadMockData(UNANSWERED_QUESTIONS_FILE);\n            const botQuestions = [];\n            Object.values(questions).forEach((question)=>{\n                if (question.botId === botId && !question.isAnswered) {\n                    botQuestions.push({\n                        ...question,\n                        timestamp: new Date(question.timestamp),\n                        respondedAt: question.respondedAt ? new Date(question.respondedAt) : undefined\n                    });\n                }\n            });\n            return botQuestions.sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime());\n        }\n        try {\n            const querySnapshot = await _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"unansweredQuestions\").where(\"botId\", \"==\", botId).where(\"isAnswered\", \"==\", false).get();\n            const questions = [];\n            querySnapshot.forEach((doc)=>{\n                questions.push({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            return questions;\n        } catch (error) {\n            console.error(\"Error fetching unanswered questions from Firebase:\", error);\n            return [];\n        }\n    },\n    async getUnansweredQuestion (questionId) {\n        if (!_lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb) {\n            // Use mock database\n            const questions = loadMockData(UNANSWERED_QUESTIONS_FILE);\n            const question = questions[questionId];\n            if (question) {\n                return {\n                    ...question,\n                    timestamp: new Date(question.timestamp),\n                    respondedAt: question.respondedAt ? new Date(question.respondedAt) : undefined\n                };\n            }\n            return null;\n        }\n        try {\n            const docRef = _lib_firebase_admin__WEBPACK_IMPORTED_MODULE_2__.adminDb.collection(\"unansweredQuestions\").doc(questionId);\n            const docSnap = await docRef.get();\n            if (docSnap.exists) {\n                return {\n                    id: docSnap.id,\n                    ...docSnap.data()\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching unanswered question from Firebase:\", error);\n            return null;\n        }\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BFLE9BQU8sRUFBRTtRQUNYO0lBQ0Y7SUFFQSxNQUFNb0csdUJBQXNCQyxVQUFrQjtRQUM1QyxJQUFJLENBQUN4SCx3REFBT0EsRUFBRTtZQUNaLG9CQUFvQjtZQUNwQixNQUFNK0csWUFBWWxHLGFBQWFKO1lBQy9CLE1BQU0wRyxXQUFXSixTQUFTLENBQUNTLFdBQVc7WUFDdEMsSUFBSUwsVUFBVTtnQkFDWixPQUFPO29CQUNMLEdBQUdBLFFBQVE7b0JBQ1hFLFdBQVcsSUFBSTVELEtBQUswRCxTQUFTRSxTQUFTO29CQUN0Q0MsYUFBYUgsU0FBU0csV0FBVyxHQUFHLElBQUk3RCxLQUFLMEQsU0FBU0csV0FBVyxJQUFJMUQ7Z0JBQ3ZFO1lBQ0Y7WUFDQSxPQUFPO1FBQ1Q7UUFFQSxJQUFJO1lBQ0YsTUFBTWhDLFNBQVM1Qix3REFBT0EsQ0FBQ0wsVUFBVSxDQUFDLHVCQUF1QkMsR0FBRyxDQUFDNEg7WUFDN0QsTUFBTTNGLFVBQVUsTUFBTUQsT0FBT2lDLEdBQUc7WUFDaEMsSUFBSWhDLFFBQVFDLE1BQU0sRUFBRTtnQkFDbEIsT0FBTztvQkFBRUMsSUFBSUYsUUFBUUUsRUFBRTtvQkFBRSxHQUFHRixRQUFRZCxJQUFJLEVBQUU7Z0JBQUM7WUFDN0M7WUFDQSxPQUFPO1FBQ1QsRUFBRSxPQUFPSSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxxREFBcURBO1lBQ25FLE9BQU87UUFDVDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FzcXVlLWJvdC1wbGF0Zm9ybS8uL2xpYi9kYXRhYmFzZS9pbmRleC50cz9hYzc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxuICBjb2xsZWN0aW9uLCBcbiAgZG9jLCBcbiAgZ2V0RG9jLCBcbiAgYWRkRG9jXG59IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBkYiB9IGZyb20gJ0AvbGliL2ZpcmViYXNlJztcbmltcG9ydCB7IGFkbWluRGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZS1hZG1pbic7XG5pbXBvcnQgeyBCb3QsIENoYXRTZXNzaW9uLCBVbmFuc3dlcmVkUXVlc3Rpb24sIENoYXRBbmFseXRpY3MsIEJvdEFuYWx5dGljcyB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBNb2NrIGRhdGFiYXNlIGZpbGUgcGF0aHNcbmNvbnN0IERFVl9EQVRBX0RJUiA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnLmRldi1kYXRhJyk7XG5jb25zdCBCT1RTX0ZJTEUgPSBwYXRoLmpvaW4oREVWX0RBVEFfRElSLCAnYm90cy5qc29uJyk7XG5jb25zdCBDSEFUX1NFU1NJT05TX0ZJTEUgPSBwYXRoLmpvaW4oREVWX0RBVEFfRElSLCAnY2hhdFNlc3Npb25zLmpzb24nKTtcbmNvbnN0IFVOQU5TV0VSRURfUVVFU1RJT05TX0ZJTEUgPSBwYXRoLmpvaW4oREVWX0RBVEFfRElSLCAndW5hbnN3ZXJlZFF1ZXN0aW9ucy5qc29uJyk7XG5cbi8vIEVuc3VyZSBkZXYgZGF0YSBkaXJlY3RvcnkgZXhpc3RzXG5pZiAoIWZzLmV4aXN0c1N5bmMoREVWX0RBVEFfRElSKSkge1xuICBmcy5ta2RpclN5bmMoREVWX0RBVEFfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuLy8gTW9jayBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zXG5jb25zdCBsb2FkTW9ja0RhdGEgPSAoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmVhZCAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gIH1cbiAgcmV0dXJuIHt9O1xufTtcblxuY29uc3Qgc2F2ZU1vY2tEYXRhID0gKGZpbGVQYXRoOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4ge1xuICB0cnkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3Qgc2F2ZSB0byAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gIH1cbn07XG5cbi8vIENsaWVudC1zaWRlIGRhdGFiYXNlIG9wZXJhdGlvbnMgKGZvciBmcm9udGVuZClcbmV4cG9ydCBjb25zdCBjbGllbnREYiA9IHtcbiAgLy8gR2V0IGJvdCBkYXRhXG4gIGFzeW5jIGdldEJvdChib3RJZDogc3RyaW5nKTogUHJvbWlzZTxCb3QgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgJ2JvdHMnLCBib3RJZCk7XG4gICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgICByZXR1cm4geyBpZDogZG9jU25hcC5pZCwgLi4uZG9jU25hcC5kYXRhKCkgfSBhcyBCb3Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm90OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSxcbiAgLy8gQWRkIGNoYXQgc2Vzc2lvblxuICBhc3luYyBhZGRDaGF0U2Vzc2lvbihzZXNzaW9uRGF0YTogT21pdDxDaGF0U2Vzc2lvbiwgJ2lkJz4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdjaGF0U2Vzc2lvbnMnKSwgc2Vzc2lvbkRhdGEpO1xuICAgICAgcmV0dXJuIGRvY1JlZi5pZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGNoYXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjYWxjdWxhdGUgYW5hbHl0aWNzXG5jb25zdCBjYWxjdWxhdGVBbmFseXRpY3MgPSAoc2Vzc2lvbnM6IENoYXRTZXNzaW9uW10pOiBCb3RBbmFseXRpY3MgPT4ge1xuICBjb25zdCB0b3RhbFZpc2l0b3JzID0gc2Vzc2lvbnMubGVuZ3RoO1xuICBjb25zdCB0b3RhbENoYXRzID0gc2Vzc2lvbnMucmVkdWNlKChzdW0sIHNlc3Npb24pID0+IHN1bSArIHNlc3Npb24ubWVzc2FnZUNvdW50LCAwKTtcbiAgY29uc3QgdG90YWxNZXNzYWdlcyA9IHNlc3Npb25zLnJlZHVjZSgoc3VtLCBzZXNzaW9uKSA9PiBzdW0gKyBzZXNzaW9uLm1lc3NhZ2VzLmxlbmd0aCwgMCk7XG4gIGNvbnN0IGF2ZXJhZ2VSZXNwb25zZVRpbWUgPSBzZXNzaW9ucy5sZW5ndGggPiAwIFxuICAgID8gc2Vzc2lvbnMucmVkdWNlKChzdW0sIHNlc3Npb24pID0+IHN1bSArIChzZXNzaW9uLmF2ZXJhZ2VSZXNwb25zZVRpbWUgfHwgMCksIDApIC8gc2Vzc2lvbnMubGVuZ3RoIFxuICAgIDogMDtcbiAgY29uc3Qgc3VjY2Vzc2Z1bFJlc3BvbnNlcyA9IHNlc3Npb25zLnJlZHVjZSgoc3VtLCBzZXNzaW9uKSA9PiBzdW0gKyBzZXNzaW9uLnN1Y2Nlc3NmdWxSZXNwb25zZXMsIDApO1xuICBjb25zdCBmYWlsZWRRdWVzdGlvbnMgPSBzZXNzaW9ucy5yZWR1Y2UoKHN1bSwgc2Vzc2lvbikgPT4gc3VtICsgc2Vzc2lvbi5mYWlsZWRRdWVzdGlvbnMsIDApO1xuXG4gIHJldHVybiB7XG4gICAgdG90YWxWaXNpdG9ycyxcbiAgICB0b3RhbENoYXRzLFxuICAgIHRvdGFsTWVzc2FnZXMsXG4gICAgYXZlcmFnZVJlc3BvbnNlVGltZSxcbiAgICBzdWNjZXNzZnVsUmVzcG9uc2VzLFxuICAgIGZhaWxlZFF1ZXN0aW9ucyxcbiAgICBzdWNjZXNzUmF0ZTogdG90YWxNZXNzYWdlcyA+IDAgPyAoc3VjY2Vzc2Z1bFJlc3BvbnNlcyAvIHRvdGFsTWVzc2FnZXMpICogMTAwIDogMCxcbiAgICBkYWlseVZpc2l0b3JzOiBbXSxcbiAgICB3ZWVrbHlDaGF0czogW10sXG4gICAgdG9wUXVlc3Rpb25zOiBbXSxcbiAgICByZXNwb25zZVRpbWVIaXN0b3J5OiBbXVxuICB9O1xufTtcblxuLy8gU2VydmVyLXNpZGUgZGF0YWJhc2Ugb3BlcmF0aW9ucyAoZm9yIEFQSSByb3V0ZXMpXG5leHBvcnQgY29uc3Qgc2VydmVyRGIgPSB7XG4gIC8vIEdldCBib3QgYnkgSURcbiAgYXN5bmMgZ2V0Qm90KGJvdElkOiBzdHJpbmcpOiBQcm9taXNlPEJvdCB8IG51bGw+IHtcbiAgICBpZiAoIWFkbWluRGIpIHtcbiAgICAgIC8vIFVzZSBtb2NrIGRhdGFiYXNlXG4gICAgICBjb25zdCBib3RzID0gbG9hZE1vY2tEYXRhKEJPVFNfRklMRSk7XG4gICAgICBjb25zdCBib3QgPSBib3RzW2JvdElkXTtcbiAgICAgIGlmIChib3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5ib3QsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShib3QuY3JlYXRlZEF0KSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKGJvdC51cGRhdGVkQXQpLFxuICAgICAgICAgIGRlcGxveWVkQXQ6IGJvdC5kZXBsb3llZEF0ID8gbmV3IERhdGUoYm90LmRlcGxveWVkQXQpIDogdW5kZWZpbmVkXG4gICAgICAgIH0gYXMgQm90O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2NSZWYgPSBhZG1pbkRiLmNvbGxlY3Rpb24oJ2JvdHMnKS5kb2MoYm90SWQpO1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGRvY1JlZi5nZXQoKTtcbiAgICAgIGlmIChkb2NTbmFwLmV4aXN0cykge1xuICAgICAgICByZXR1cm4geyBpZDogZG9jU25hcC5pZCwgLi4uZG9jU25hcC5kYXRhKCkgfSBhcyBCb3Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm90IGZyb20gRmlyZWJhc2U6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8vIEdldCBib3Qgd2l0aCBhbmFseXRpY3NcbiAgYXN5bmMgZ2V0Qm90V2l0aEFuYWx5dGljcyhib3RJZDogc3RyaW5nKTogUHJvbWlzZTxCb3QgfCBudWxsPiB7XG4gICAgY29uc3QgYm90ID0gYXdhaXQgdGhpcy5nZXRCb3QoYm90SWQpO1xuICAgIGlmICghYm90KSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgdGhpcy5nZXRDaGF0U2Vzc2lvbnNCeUJvdChib3RJZCk7XG4gICAgYm90LmFuYWx5dGljcyA9IGNhbGN1bGF0ZUFuYWx5dGljcyhzZXNzaW9ucyk7XG4gICAgcmV0dXJuIGJvdDtcbiAgfSxcblxuICAvLyBDcmVhdGUgbmV3IGJvdFxuICBhc3luYyBjcmVhdGVCb3QoYm90RGF0YTogQm90KTogUHJvbWlzZTxCb3Q+IHtcbiAgICBpZiAoIWFkbWluRGIpIHtcbiAgICAgIC8vIFVzZSBtb2NrIGRhdGFiYXNlXG4gICAgICBjb25zdCBib3RzID0gbG9hZE1vY2tEYXRhKEJPVFNfRklMRSk7XG4gICAgICBjb25zdCBjbGVhbkJvdERhdGEgPSB7XG4gICAgICAgIC4uLmJvdERhdGEsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBib3REYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBkZXBsb3llZEF0OiBib3REYXRhLmRlcGxveWVkQXQgfHwgbnVsbCxcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVVcmw6IGJvdERhdGEucHJvZmlsZVBpY3R1cmVVcmwgfHwgbnVsbCxcbiAgICAgICAgd2VsY29tZU1lc3NhZ2U6IGJvdERhdGEud2VsY29tZU1lc3NhZ2UgfHwgbnVsbCxcbiAgICAgIH07XG4gICAgICBib3RzW2JvdERhdGEuaWRdID0gY2xlYW5Cb3REYXRhO1xuICAgICAgc2F2ZU1vY2tEYXRhKEJPVFNfRklMRSwgYm90cyk7XG4gICAgICByZXR1cm4gYm90RGF0YTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNsZWFuQm90RGF0YSA9IHtcbiAgICAgICAgLi4uYm90RGF0YSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJvdERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIGRlcGxveWVkQXQ6IGJvdERhdGEuZGVwbG95ZWRBdCB8fCBudWxsLFxuICAgICAgICBwcm9maWxlUGljdHVyZVVybDogYm90RGF0YS5wcm9maWxlUGljdHVyZVVybCB8fCBudWxsLFxuICAgICAgICB3ZWxjb21lTWVzc2FnZTogYm90RGF0YS53ZWxjb21lTWVzc2FnZSB8fCBudWxsLFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGFkbWluRGIuY29sbGVjdGlvbignYm90cycpLmRvYyhib3REYXRhLmlkKS5zZXQoY2xlYW5Cb3REYXRhKTtcbiAgICAgIHJldHVybiBib3REYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYm90IHRvIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICAvLyBVcGRhdGUgYm90XG4gIGFzeW5jIHVwZGF0ZUJvdChib3REYXRhOiBCb3QpOiBQcm9taXNlPEJvdD4ge1xuICAgIGlmICghYWRtaW5EYikge1xuICAgICAgLy8gVXNlIG1vY2sgZGF0YWJhc2VcbiAgICAgIGNvbnN0IGJvdHMgPSBsb2FkTW9ja0RhdGEoQk9UU19GSUxFKTtcbiAgICAgIGNvbnN0IGNsZWFuQm90RGF0YSA9IHtcbiAgICAgICAgLi4uYm90RGF0YSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJvdERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIGRlcGxveWVkQXQ6IGJvdERhdGEuZGVwbG95ZWRBdCB8fCBudWxsLFxuICAgICAgICBwcm9maWxlUGljdHVyZVVybDogYm90RGF0YS5wcm9maWxlUGljdHVyZVVybCB8fCBudWxsLFxuICAgICAgICB3ZWxjb21lTWVzc2FnZTogYm90RGF0YS53ZWxjb21lTWVzc2FnZSB8fCBudWxsLFxuICAgICAgfTtcbiAgICAgIGJvdHNbYm90RGF0YS5pZF0gPSBjbGVhbkJvdERhdGE7XG4gICAgICBzYXZlTW9ja0RhdGEoQk9UU19GSUxFLCBib3RzKTtcbiAgICAgIHJldHVybiBib3REYXRhO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2xlYW5Cb3REYXRhID0ge1xuICAgICAgICAuLi5ib3REYXRhLFxuICAgICAgICBkZXNjcmlwdGlvbjogYm90RGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgZGVwbG95ZWRBdDogYm90RGF0YS5kZXBsb3llZEF0IHx8IG51bGwsXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiBib3REYXRhLnByb2ZpbGVQaWN0dXJlVXJsIHx8IG51bGwsXG4gICAgICAgIHdlbGNvbWVNZXNzYWdlOiBib3REYXRhLndlbGNvbWVNZXNzYWdlIHx8IG51bGwsXG4gICAgICB9O1xuICAgICAgYXdhaXQgYWRtaW5EYi5jb2xsZWN0aW9uKCdib3RzJykuZG9jKGJvdERhdGEuaWQpLnNldChjbGVhbkJvdERhdGEpO1xuICAgICAgcmV0dXJuIGJvdERhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGJvdCBpbiBGaXJlYmFzZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sXG5cbiAgLy8gR2V0IGJvdHMgYnkgb3duZXIgSURcbiAgYXN5bmMgZ2V0Qm90c0J5T3duZXIob3duZXJJZDogc3RyaW5nKTogUHJvbWlzZTxCb3RbXT4ge1xuICAgIGlmICghYWRtaW5EYikge1xuICAgICAgLy8gVXNlIG1vY2sgZGF0YWJhc2VcbiAgICAgIGNvbnN0IGJvdHMgPSBsb2FkTW9ja0RhdGEoQk9UU19GSUxFKTtcbiAgICAgIGNvbnN0IHVzZXJCb3RzOiBCb3RbXSA9IFtdO1xuICAgICAgXG4gICAgICBPYmplY3QudmFsdWVzKGJvdHMpLmZvckVhY2goKGJvdDogYW55KSA9PiB7XG4gICAgICAgIGlmIChib3Qub3duZXJJZCA9PT0gb3duZXJJZCkge1xuICAgICAgICAgIHVzZXJCb3RzLnB1c2goe1xuICAgICAgICAgICAgLi4uYm90LFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShib3QuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoYm90LnVwZGF0ZWRBdCksXG4gICAgICAgICAgICBkZXBsb3llZEF0OiBib3QuZGVwbG95ZWRBdCA/IG5ldyBEYXRlKGJvdC5kZXBsb3llZEF0KSA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0gYXMgQm90KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNvcnQgYnkgY3JlYXRlZEF0IGRlc2NlbmRpbmdcbiAgICAgIHJldHVybiB1c2VyQm90cy5zb3J0KChhLCBiKSA9PiBiLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLSBhLmNyZWF0ZWRBdC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGFkbWluRGJcbiAgICAgICAgLmNvbGxlY3Rpb24oJ2JvdHMnKVxuICAgICAgICAud2hlcmUoJ293bmVySWQnLCAnPT0nLCBvd25lcklkKVxuICAgICAgICAub3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKVxuICAgICAgICAuZ2V0KCk7XG4gICAgICBjb25zdCBmaXJlYmFzZUJvdHM6IEJvdFtdID0gW107XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYzogYW55KSA9PiB7XG4gICAgICAgIGZpcmViYXNlQm90cy5wdXNoKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9IGFzIEJvdCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmaXJlYmFzZUJvdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGJvdHMgYnkgb3duZXIgZnJvbSBGaXJlYmFzZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuXG4gIC8vIEdldCBib3RzIGJ5IHBob25lIG51bWJlclxuICBhc3luYyBnZXRCb3RzQnlQaG9uZU51bWJlcihwaG9uZU51bWJlcjogc3RyaW5nKTogUHJvbWlzZTxCb3RbXT4ge1xuICAgIGlmICghYWRtaW5EYikge1xuICAgICAgLy8gVXNlIG1vY2sgZGF0YWJhc2VcbiAgICAgIGNvbnN0IGJvdHMgPSBsb2FkTW9ja0RhdGEoQk9UU19GSUxFKTtcbiAgICAgIGNvbnN0IHBob25lQm90czogQm90W10gPSBbXTtcbiAgICAgIFxuICAgICAgT2JqZWN0LnZhbHVlcyhib3RzKS5mb3JFYWNoKChib3Q6IGFueSkgPT4ge1xuICAgICAgICBpZiAoYm90Lm93bmVyUGhvbmVOdW1iZXIgPT09IHBob25lTnVtYmVyKSB7XG4gICAgICAgICAgcGhvbmVCb3RzLnB1c2goe1xuICAgICAgICAgICAgLi4uYm90LFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShib3QuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoYm90LnVwZGF0ZWRBdCksXG4gICAgICAgICAgICBkZXBsb3llZEF0OiBib3QuZGVwbG95ZWRBdCA/IG5ldyBEYXRlKGJvdC5kZXBsb3llZEF0KSA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0gYXMgQm90KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNvcnQgYnkgY3JlYXRlZEF0IGRlc2NlbmRpbmdcbiAgICAgIHJldHVybiBwaG9uZUJvdHMuc29ydCgoYSwgYikgPT4gYi5jcmVhdGVkQXQuZ2V0VGltZSgpIC0gYS5jcmVhdGVkQXQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBhZG1pbkRiXG4gICAgICAgIC5jb2xsZWN0aW9uKCdib3RzJylcbiAgICAgICAgLndoZXJlKCdvd25lclBob25lTnVtYmVyJywgJz09JywgcGhvbmVOdW1iZXIpXG4gICAgICAgIC5vcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXG4gICAgICAgIC5nZXQoKTtcbiAgICAgIGNvbnN0IGZpcmViYXNlQm90czogQm90W10gPSBbXTtcbiAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jOiBhbnkpID0+IHtcbiAgICAgICAgZmlyZWJhc2VCb3RzLnB1c2goeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0gYXMgQm90KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZpcmViYXNlQm90cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm90cyBieSBwaG9uZSBmcm9tIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRW5oYW5jZWQgZ2V0Qm90c0J5T3duZXIgdGhhdCBhbHNvIGNoZWNrcyBwaG9uZSBudW1iZXIgYXMgZmFsbGJhY2tcbiAgYXN5bmMgZ2V0Qm90c0J5T3duZXJXaXRoRmFsbGJhY2sob3duZXJJZDogc3RyaW5nLCBwaG9uZU51bWJlcj86IHN0cmluZyk6IFByb21pc2U8Qm90W10+IHtcbiAgICBsZXQgYm90cyA9IGF3YWl0IHRoaXMuZ2V0Qm90c0J5T3duZXIob3duZXJJZCk7XG4gICAgaWYgKGJvdHMubGVuZ3RoID09PSAwICYmIHBob25lTnVtYmVyKSB7XG4gICAgICBjb25zdCBwaG9uZUJvdHMgPSBhd2FpdCB0aGlzLmdldEJvdHNCeVBob25lTnVtYmVyKHBob25lTnVtYmVyKTtcbiAgICAgIGlmIChwaG9uZUJvdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGJvdCBvZiBwaG9uZUJvdHMpIHtcbiAgICAgICAgICBib3Qub3duZXJJZCA9IG93bmVySWQ7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVCb3QoYm90KTtcbiAgICAgICAgfVxuICAgICAgICBib3RzID0gcGhvbmVCb3RzO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYm90cztcbiAgfSxcblxuICAvLyBEZWxldGUgYm90XG4gIGFzeW5jIGRlbGV0ZUJvdChib3RJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCFhZG1pbkRiKSB7XG4gICAgICAvLyBVc2UgbW9jayBkYXRhYmFzZVxuICAgICAgY29uc3QgYm90cyA9IGxvYWRNb2NrRGF0YShCT1RTX0ZJTEUpO1xuICAgICAgaWYgKGJvdHNbYm90SWRdKSB7XG4gICAgICAgIGRlbGV0ZSBib3RzW2JvdElkXTtcbiAgICAgICAgc2F2ZU1vY2tEYXRhKEJPVFNfRklMRSwgYm90cyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRtaW5EYi5jb2xsZWN0aW9uKCdib3RzJykuZG9jKGJvdElkKS5kZWxldGUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBib3QgZnJvbSBGaXJlYmFzZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8vIENoYXQgU2Vzc2lvbnMgTWFuYWdlbWVudFxuICBhc3luYyBjcmVhdGVDaGF0U2Vzc2lvbihzZXNzaW9uRGF0YTogQ2hhdFNlc3Npb24pOiBQcm9taXNlPENoYXRTZXNzaW9uPiB7XG4gICAgaWYgKCFhZG1pbkRiKSB7XG4gICAgICAvLyBVc2UgbW9jayBkYXRhYmFzZVxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBsb2FkTW9ja0RhdGEoQ0hBVF9TRVNTSU9OU19GSUxFKTtcbiAgICAgIHNlc3Npb25zW3Nlc3Npb25EYXRhLmlkXSA9IHNlc3Npb25EYXRhO1xuICAgICAgc2F2ZU1vY2tEYXRhKENIQVRfU0VTU0lPTlNfRklMRSwgc2Vzc2lvbnMpO1xuICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRtaW5EYi5jb2xsZWN0aW9uKCdjaGF0U2Vzc2lvbnMnKS5kb2Moc2Vzc2lvbkRhdGEuaWQpLnNldChzZXNzaW9uRGF0YSk7XG4gICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjaGF0IHNlc3Npb24gdG8gRmlyZWJhc2U6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRTZXNzaW9uKHNlc3Npb25EYXRhOiBDaGF0U2Vzc2lvbik6IFByb21pc2U8Q2hhdFNlc3Npb24+IHtcbiAgICBpZiAoIWFkbWluRGIpIHtcbiAgICAgIC8vIFVzZSBtb2NrIGRhdGFiYXNlXG4gICAgICBjb25zdCBzZXNzaW9ucyA9IGxvYWRNb2NrRGF0YShDSEFUX1NFU1NJT05TX0ZJTEUpO1xuICAgICAgc2Vzc2lvbnNbc2Vzc2lvbkRhdGEuaWRdID0gc2Vzc2lvbkRhdGE7XG4gICAgICBzYXZlTW9ja0RhdGEoQ0hBVF9TRVNTSU9OU19GSUxFLCBzZXNzaW9ucyk7XG4gICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhZG1pbkRiLmNvbGxlY3Rpb24oJ2NoYXRTZXNzaW9ucycpLmRvYyhzZXNzaW9uRGF0YS5pZCkuc2V0KHNlc3Npb25EYXRhKTtcbiAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY2hhdCBzZXNzaW9uIGluIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyBnZXRDaGF0U2Vzc2lvbnNCeUJvdChib3RJZDogc3RyaW5nKTogUHJvbWlzZTxDaGF0U2Vzc2lvbltdPiB7XG4gICAgaWYgKCFhZG1pbkRiKSB7XG4gICAgICAvLyBVc2UgbW9jayBkYXRhYmFzZVxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBsb2FkTW9ja0RhdGEoQ0hBVF9TRVNTSU9OU19GSUxFKTtcbiAgICAgIGNvbnN0IGJvdFNlc3Npb25zOiBDaGF0U2Vzc2lvbltdID0gW107XG4gICAgICBcbiAgICAgIE9iamVjdC52YWx1ZXMoc2Vzc2lvbnMpLmZvckVhY2goKHNlc3Npb246IGFueSkgPT4ge1xuICAgICAgICBpZiAoc2Vzc2lvbi5ib3RJZCA9PT0gYm90SWQpIHtcbiAgICAgICAgICBib3RTZXNzaW9ucy5wdXNoKHtcbiAgICAgICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgICAgICBzdGFydGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24uc3RhcnRlZEF0KSxcbiAgICAgICAgICAgIGxhc3RBY3Rpdml0eUF0OiBuZXcgRGF0ZShzZXNzaW9uLmxhc3RBY3Rpdml0eUF0KVxuICAgICAgICAgIH0gYXMgQ2hhdFNlc3Npb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGJvdFNlc3Npb25zLnNvcnQoKGEsIGIpID0+IGIubGFzdEFjdGl2aXR5QXQuZ2V0VGltZSgpIC0gYS5sYXN0QWN0aXZpdHlBdC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGFkbWluRGJcbiAgICAgICAgLmNvbGxlY3Rpb24oJ2NoYXRTZXNzaW9ucycpXG4gICAgICAgIC53aGVyZSgnYm90SWQnLCAnPT0nLCBib3RJZClcbiAgICAgICAgLm9yZGVyQnkoJ2xhc3RBY3Rpdml0eUF0JywgJ2Rlc2MnKVxuICAgICAgICAuZ2V0KCk7XG4gICAgICBjb25zdCBmaXJlYmFzZVNlc3Npb25zOiBDaGF0U2Vzc2lvbltdID0gW107XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYzogYW55KSA9PiB7XG4gICAgICAgIGZpcmViYXNlU2Vzc2lvbnMucHVzaCh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBDaGF0U2Vzc2lvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmaXJlYmFzZVNlc3Npb25zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjaGF0IHNlc3Npb25zIGJ5IGJvdCBmcm9tIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgZ2V0Q2hhdFNlc3Npb25zQnlVc2VyKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxDaGF0U2Vzc2lvbltdPiB7XG4gICAgaWYgKCFhZG1pbkRiKSB7XG4gICAgICAvLyBVc2UgbW9jayBkYXRhYmFzZVxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBsb2FkTW9ja0RhdGEoQ0hBVF9TRVNTSU9OU19GSUxFKTtcbiAgICAgIGNvbnN0IHVzZXJTZXNzaW9uczogQ2hhdFNlc3Npb25bXSA9IFtdO1xuICAgICAgXG4gICAgICBPYmplY3QudmFsdWVzKHNlc3Npb25zKS5mb3JFYWNoKChzZXNzaW9uOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHNlc3Npb24udXNlcklkID09PSB1c2VySWQgJiYgc2Vzc2lvbi5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICB1c2VyU2Vzc2lvbnMucHVzaCh7XG4gICAgICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uLnN0YXJ0ZWRBdCksXG4gICAgICAgICAgICBsYXN0QWN0aXZpdHlBdDogbmV3IERhdGUoc2Vzc2lvbi5sYXN0QWN0aXZpdHlBdClcbiAgICAgICAgICB9IGFzIENoYXRTZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB1c2VyU2Vzc2lvbnMuc29ydCgoYSwgYikgPT4gYi5sYXN0QWN0aXZpdHlBdC5nZXRUaW1lKCkgLSBhLmxhc3RBY3Rpdml0eUF0LmdldFRpbWUoKSk7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBVc2Ugc2ltcGxlciBxdWVyeSB0byBhdm9pZCBjb21wbGV4IGNvbXBvc2l0ZSBpbmRleCByZXF1aXJlbWVudHNcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBhZG1pbkRiXG4gICAgICAgIC5jb2xsZWN0aW9uKCdjaGF0U2Vzc2lvbnMnKVxuICAgICAgICAud2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZClcbiAgICAgICAgLmdldCgpO1xuICAgICAgXG4gICAgICBjb25zdCBmaXJlYmFzZVNlc3Npb25zOiBDaGF0U2Vzc2lvbltdID0gW107XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYzogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgLy8gRmlsdGVyIGZvciBhdXRoZW50aWNhdGVkIHNlc3Npb25zIGluIG1lbW9yeVxuICAgICAgICBpZiAoc2Vzc2lvbkRhdGEuaXNBdXRoZW50aWNhdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgZmlyZWJhc2VTZXNzaW9ucy5wdXNoKHsgaWQ6IGRvYy5pZCwgLi4uc2Vzc2lvbkRhdGEgfSBhcyBDaGF0U2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTb3J0IGJ5IGxhc3RBY3Rpdml0eUF0IGluIG1lbW9yeSAoZGVzY2VuZGluZylcbiAgICAgIHJldHVybiBmaXJlYmFzZVNlc3Npb25zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgYVRpbWUgPSBhLmxhc3RBY3Rpdml0eUF0IGluc3RhbmNlb2YgRGF0ZSA/IGEubGFzdEFjdGl2aXR5QXQgOiBuZXcgRGF0ZShhLmxhc3RBY3Rpdml0eUF0KTtcbiAgICAgICAgY29uc3QgYlRpbWUgPSBiLmxhc3RBY3Rpdml0eUF0IGluc3RhbmNlb2YgRGF0ZSA/IGIubGFzdEFjdGl2aXR5QXQgOiBuZXcgRGF0ZShiLmxhc3RBY3Rpdml0eUF0KTtcbiAgICAgICAgcmV0dXJuIGJUaW1lLmdldFRpbWUoKSAtIGFUaW1lLmdldFRpbWUoKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjaGF0IHNlc3Npb25zIGJ5IHVzZXIgZnJvbSBGaXJlYmFzZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGdldENoYXRTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxDaGF0U2Vzc2lvbiB8IG51bGw+IHtcbiAgICBpZiAoIWFkbWluRGIpIHtcbiAgICAgIC8vIFVzZSBtb2NrIGRhdGFiYXNlXG4gICAgICBjb25zdCBzZXNzaW9ucyA9IGxvYWRNb2NrRGF0YShDSEFUX1NFU1NJT05TX0ZJTEUpO1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHNlc3Npb25zW3Nlc3Npb25JZF07XG4gICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgICAgc3RhcnRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uLnN0YXJ0ZWRBdCksXG4gICAgICAgICAgbGFzdEFjdGl2aXR5QXQ6IG5ldyBEYXRlKHNlc3Npb24ubGFzdEFjdGl2aXR5QXQpXG4gICAgICAgIH0gYXMgQ2hhdFNlc3Npb247XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGFkbWluRGIuY29sbGVjdGlvbignY2hhdFNlc3Npb25zJykuZG9jKHNlc3Npb25JZCk7XG4gICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZG9jUmVmLmdldCgpO1xuICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKSB7XG4gICAgICAgIHJldHVybiB7IGlkOiBkb2NTbmFwLmlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9IGFzIENoYXRTZXNzaW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYXQgc2Vzc2lvbiBmcm9tIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvLyBVbmFuc3dlcmVkIFF1ZXN0aW9ucyBNYW5hZ2VtZW50XG4gIGFzeW5jIGNyZWF0ZVVuYW5zd2VyZWRRdWVzdGlvbihxdWVzdGlvbkRhdGE6IFVuYW5zd2VyZWRRdWVzdGlvbik6IFByb21pc2U8VW5hbnN3ZXJlZFF1ZXN0aW9uPiB7XG4gICAgaWYgKCFhZG1pbkRiKSB7XG4gICAgICAvLyBVc2UgbW9jayBkYXRhYmFzZVxuICAgICAgY29uc3QgcXVlc3Rpb25zID0gbG9hZE1vY2tEYXRhKFVOQU5TV0VSRURfUVVFU1RJT05TX0ZJTEUpO1xuICAgICAgcXVlc3Rpb25zW3F1ZXN0aW9uRGF0YS5pZF0gPSBxdWVzdGlvbkRhdGE7XG4gICAgICBzYXZlTW9ja0RhdGEoVU5BTlNXRVJFRF9RVUVTVElPTlNfRklMRSwgcXVlc3Rpb25zKTtcbiAgICAgIHJldHVybiBxdWVzdGlvbkRhdGE7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhZG1pbkRiLmNvbGxlY3Rpb24oJ3VuYW5zd2VyZWRRdWVzdGlvbnMnKS5kb2MocXVlc3Rpb25EYXRhLmlkKS5zZXQocXVlc3Rpb25EYXRhKTtcbiAgICAgIHJldHVybiBxdWVzdGlvbkRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB1bmFuc3dlcmVkIHF1ZXN0aW9uIHRvIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyB1cGRhdGVVbmFuc3dlcmVkUXVlc3Rpb24ocXVlc3Rpb25EYXRhOiBVbmFuc3dlcmVkUXVlc3Rpb24pOiBQcm9taXNlPFVuYW5zd2VyZWRRdWVzdGlvbj4ge1xuICAgIGlmICghYWRtaW5EYikge1xuICAgICAgLy8gVXNlIG1vY2sgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHF1ZXN0aW9ucyA9IGxvYWRNb2NrRGF0YShVTkFOU1dFUkVEX1FVRVNUSU9OU19GSUxFKTtcbiAgICAgIHF1ZXN0aW9uc1txdWVzdGlvbkRhdGEuaWRdID0gcXVlc3Rpb25EYXRhO1xuICAgICAgc2F2ZU1vY2tEYXRhKFVOQU5TV0VSRURfUVVFU1RJT05TX0ZJTEUsIHF1ZXN0aW9ucyk7XG4gICAgICByZXR1cm4gcXVlc3Rpb25EYXRhO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRtaW5EYi5jb2xsZWN0aW9uKCd1bmFuc3dlcmVkUXVlc3Rpb25zJykuZG9jKHF1ZXN0aW9uRGF0YS5pZCkuc2V0KHF1ZXN0aW9uRGF0YSk7XG4gICAgICByZXR1cm4gcXVlc3Rpb25EYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1bmFuc3dlcmVkIHF1ZXN0aW9uIGluIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyBnZXRVbmFuc3dlcmVkUXVlc3Rpb25zQnlCb3QoYm90SWQ6IHN0cmluZyk6IFByb21pc2U8VW5hbnN3ZXJlZFF1ZXN0aW9uW10+IHtcbiAgICBpZiAoIWFkbWluRGIpIHtcbiAgICAgIC8vIFVzZSBtb2NrIGRhdGFiYXNlXG4gICAgICBjb25zdCBxdWVzdGlvbnMgPSBsb2FkTW9ja0RhdGEoVU5BTlNXRVJFRF9RVUVTVElPTlNfRklMRSk7XG4gICAgICBjb25zdCBib3RRdWVzdGlvbnM6IFVuYW5zd2VyZWRRdWVzdGlvbltdID0gW107XG4gICAgICBcbiAgICAgIE9iamVjdC52YWx1ZXMocXVlc3Rpb25zKS5mb3JFYWNoKChxdWVzdGlvbjogYW55KSA9PiB7XG4gICAgICAgIGlmIChxdWVzdGlvbi5ib3RJZCA9PT0gYm90SWQgJiYgIXF1ZXN0aW9uLmlzQW5zd2VyZWQpIHtcbiAgICAgICAgICBib3RRdWVzdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAuLi5xdWVzdGlvbixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUocXVlc3Rpb24udGltZXN0YW1wKSxcbiAgICAgICAgICAgIHJlc3BvbmRlZEF0OiBxdWVzdGlvbi5yZXNwb25kZWRBdCA/IG5ldyBEYXRlKHF1ZXN0aW9uLnJlc3BvbmRlZEF0KSA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0gYXMgVW5hbnN3ZXJlZFF1ZXN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBib3RRdWVzdGlvbnMuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAuZ2V0VGltZSgpIC0gYS50aW1lc3RhbXAuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBhZG1pbkRiXG4gICAgICAgIC5jb2xsZWN0aW9uKCd1bmFuc3dlcmVkUXVlc3Rpb25zJylcbiAgICAgICAgLndoZXJlKCdib3RJZCcsICc9PScsIGJvdElkKVxuICAgICAgICAud2hlcmUoJ2lzQW5zd2VyZWQnLCAnPT0nLCBmYWxzZSlcbiAgICAgICAgLmdldCgpO1xuICAgICAgY29uc3QgcXVlc3Rpb25zOiBVbmFuc3dlcmVkUXVlc3Rpb25bXSA9IFtdO1xuICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2M6IGFueSkgPT4ge1xuICAgICAgICBxdWVzdGlvbnMucHVzaCh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBVbmFuc3dlcmVkUXVlc3Rpb24pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcXVlc3Rpb25zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1bmFuc3dlcmVkIHF1ZXN0aW9ucyBmcm9tIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgZ2V0VW5hbnN3ZXJlZFF1ZXN0aW9uKHF1ZXN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8VW5hbnN3ZXJlZFF1ZXN0aW9uIHwgbnVsbD4ge1xuICAgIGlmICghYWRtaW5EYikge1xuICAgICAgLy8gVXNlIG1vY2sgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHF1ZXN0aW9ucyA9IGxvYWRNb2NrRGF0YShVTkFOU1dFUkVEX1FVRVNUSU9OU19GSUxFKTtcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gcXVlc3Rpb25zW3F1ZXN0aW9uSWRdO1xuICAgICAgaWYgKHF1ZXN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucXVlc3Rpb24sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShxdWVzdGlvbi50aW1lc3RhbXApLFxuICAgICAgICAgIHJlc3BvbmRlZEF0OiBxdWVzdGlvbi5yZXNwb25kZWRBdCA/IG5ldyBEYXRlKHF1ZXN0aW9uLnJlc3BvbmRlZEF0KSA6IHVuZGVmaW5lZFxuICAgICAgICB9IGFzIFVuYW5zd2VyZWRRdWVzdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZG9jUmVmID0gYWRtaW5EYi5jb2xsZWN0aW9uKCd1bmFuc3dlcmVkUXVlc3Rpb25zJykuZG9jKHF1ZXN0aW9uSWQpO1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGRvY1JlZi5nZXQoKTtcbiAgICAgIGlmIChkb2NTbmFwLmV4aXN0cykge1xuICAgICAgICByZXR1cm4geyBpZDogZG9jU25hcC5pZCwgLi4uZG9jU25hcC5kYXRhKCkgfSBhcyBVbmFuc3dlcmVkUXVlc3Rpb247XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdW5hbnN3ZXJlZCBxdWVzdGlvbiBmcm9tIEZpcmViYXNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufTsgIl0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJkb2MiLCJnZXREb2MiLCJhZGREb2MiLCJkYiIsImFkbWluRGIiLCJmcyIsInBhdGgiLCJERVZfREFUQV9ESVIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsIkJPVFNfRklMRSIsIkNIQVRfU0VTU0lPTlNfRklMRSIsIlVOQU5TV0VSRURfUVVFU1RJT05TX0ZJTEUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibG9hZE1vY2tEYXRhIiwiZmlsZVBhdGgiLCJkYXRhIiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsInNhdmVNb2NrRGF0YSIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJjbGllbnREYiIsImdldEJvdCIsImJvdElkIiwiZG9jUmVmIiwiZG9jU25hcCIsImV4aXN0cyIsImlkIiwiYWRkQ2hhdFNlc3Npb24iLCJzZXNzaW9uRGF0YSIsImNhbGN1bGF0ZUFuYWx5dGljcyIsInNlc3Npb25zIiwidG90YWxWaXNpdG9ycyIsImxlbmd0aCIsInRvdGFsQ2hhdHMiLCJyZWR1Y2UiLCJzdW0iLCJzZXNzaW9uIiwibWVzc2FnZUNvdW50IiwidG90YWxNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsInN1Y2Nlc3NmdWxSZXNwb25zZXMiLCJmYWlsZWRRdWVzdGlvbnMiLCJzdWNjZXNzUmF0ZSIsImRhaWx5VmlzaXRvcnMiLCJ3ZWVrbHlDaGF0cyIsInRvcFF1ZXN0aW9ucyIsInJlc3BvbnNlVGltZUhpc3RvcnkiLCJzZXJ2ZXJEYiIsImJvdHMiLCJib3QiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiZGVwbG95ZWRBdCIsInVuZGVmaW5lZCIsImdldCIsImdldEJvdFdpdGhBbmFseXRpY3MiLCJnZXRDaGF0U2Vzc2lvbnNCeUJvdCIsImFuYWx5dGljcyIsImNyZWF0ZUJvdCIsImJvdERhdGEiLCJjbGVhbkJvdERhdGEiLCJkZXNjcmlwdGlvbiIsInByb2ZpbGVQaWN0dXJlVXJsIiwid2VsY29tZU1lc3NhZ2UiLCJzZXQiLCJ1cGRhdGVCb3QiLCJnZXRCb3RzQnlPd25lciIsIm93bmVySWQiLCJ1c2VyQm90cyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJwdXNoIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsInF1ZXJ5U25hcHNob3QiLCJ3aGVyZSIsIm9yZGVyQnkiLCJmaXJlYmFzZUJvdHMiLCJnZXRCb3RzQnlQaG9uZU51bWJlciIsInBob25lTnVtYmVyIiwicGhvbmVCb3RzIiwib3duZXJQaG9uZU51bWJlciIsImdldEJvdHNCeU93bmVyV2l0aEZhbGxiYWNrIiwiZGVsZXRlQm90IiwiZGVsZXRlIiwiY3JlYXRlQ2hhdFNlc3Npb24iLCJ1cGRhdGVDaGF0U2Vzc2lvbiIsImJvdFNlc3Npb25zIiwic3RhcnRlZEF0IiwibGFzdEFjdGl2aXR5QXQiLCJmaXJlYmFzZVNlc3Npb25zIiwiZ2V0Q2hhdFNlc3Npb25zQnlVc2VyIiwidXNlcklkIiwidXNlclNlc3Npb25zIiwiaXNBdXRoZW50aWNhdGVkIiwiYVRpbWUiLCJiVGltZSIsImdldENoYXRTZXNzaW9uIiwic2Vzc2lvbklkIiwiY3JlYXRlVW5hbnN3ZXJlZFF1ZXN0aW9uIiwicXVlc3Rpb25EYXRhIiwicXVlc3Rpb25zIiwidXBkYXRlVW5hbnN3ZXJlZFF1ZXN0aW9uIiwiZ2V0VW5hbnN3ZXJlZFF1ZXN0aW9uc0J5Qm90IiwiYm90UXVlc3Rpb25zIiwicXVlc3Rpb24iLCJpc0Fuc3dlcmVkIiwidGltZXN0YW1wIiwicmVzcG9uZGVkQXQiLCJnZXRVbmFuc3dlcmVkUXVlc3Rpb24iLCJxdWVzdGlvbklkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/index.ts\n");

/***/ }),

/***/ "(api)/./lib/firebase-admin.ts":
/*!*******************************!*\
  !*** ./lib/firebase-admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminDb: () => (/* binding */ adminDb)\n/* harmony export */ });\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconsole.log(\"\\uD83D\\uDD0D Firebase Admin credentials check:\", {\n    hasProjectId: !!process.env.FIREBASE_PROJECT_ID,\n    hasClientEmail: !!process.env.FIREBASE_CLIENT_EMAIL,\n    hasPrivateKey: !!process.env.FIREBASE_PRIVATE_KEY,\n    isValidPrivateKey: process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.includes(\"BEGIN PRIVATE KEY\") : false,\n    hasValidCredentials: !!(process.env.FIREBASE_PROJECT_ID && process.env.FIREBASE_CLIENT_EMAIL && process.env.FIREBASE_PRIVATE_KEY),\n    privateKeyLength: process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.length : 0\n});\nlet adminDb = null;\n// Test Firebase connection\nasync function testFirebaseConnection(db) {\n    try {\n        await db.collection(\"_test\").limit(1).get();\n        console.log(\"✅ Firebase connection test successful\");\n    } catch (testError) {\n        console.warn(\"⚠️ Firebase connection test failed:\", testError instanceof Error ? testError.message : String(testError));\n        console.log(\"\\uD83D\\uDD04 Will fallback to mock database for operations\");\n    }\n}\ntry {\n    // Check if we have all required credentials\n    if (!process.env.FIREBASE_PROJECT_ID || !process.env.FIREBASE_CLIENT_EMAIL || !process.env.FIREBASE_PRIVATE_KEY) {\n        console.log(\"\\uD83D\\uDEAB Firebase Admin disabled - missing credentials, using mock data for development\");\n        adminDb = null;\n    } else {\n        // Initialize Firebase Admin if not already initialized\n        if ((0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length === 0) {\n            // Clean and validate the private key\n            let privateKey = process.env.FIREBASE_PRIVATE_KEY;\n            // Handle different private key formats\n            if (privateKey.startsWith('\"') && privateKey.endsWith('\"')) {\n                privateKey = privateKey.slice(1, -1);\n            }\n            // Replace escaped newlines with actual newlines\n            privateKey = privateKey.replace(/\\\\n/g, \"\\n\");\n            // Validate the private key format\n            if (!privateKey.includes(\"BEGIN PRIVATE KEY\") || !privateKey.includes(\"END PRIVATE KEY\")) {\n                throw new Error(\"Invalid private key format - must contain BEGIN and END PRIVATE KEY markers\");\n            }\n            console.log(\"\\uD83D\\uDD27 Initializing Firebase Admin with cleaned credentials...\");\n            const serviceAccount = {\n                projectId: process.env.FIREBASE_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n                privateKey: privateKey\n            };\n            const app = (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)({\n                credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.cert)(serviceAccount),\n                projectId: process.env.FIREBASE_PROJECT_ID\n            });\n            adminDb = (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\n            console.log(\"✅ Firebase Admin initialized successfully\");\n            // Test the connection asynchronously\n            testFirebaseConnection(adminDb);\n        } else {\n            adminDb = (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)();\n            console.log(\"✅ Firebase Admin already initialized\");\n        }\n    }\n} catch (error) {\n    console.error(\"❌ Firebase Admin initialization failed:\", error instanceof Error ? error.message : String(error));\n    console.log(\"\\uD83D\\uDEAB Firebase Admin disabled - using mock data for development\");\n    adminDb = null;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZmlyZWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0U7QUFDVjtBQUV4REksUUFBUUMsR0FBRyxDQUFDLGtEQUF3QztJQUNsREMsY0FBYyxDQUFDLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CO0lBQy9DQyxnQkFBZ0IsQ0FBQyxDQUFDSCxRQUFRQyxHQUFHLENBQUNHLHFCQUFxQjtJQUNuREMsZUFBZSxDQUFDLENBQUNMLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CO0lBQ2pEQyxtQkFBbUJQLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLEdBQUdOLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLENBQUNFLFFBQVEsQ0FBQyx1QkFBdUI7SUFDdkhDLHFCQUFxQixDQUFDLENBQUVULENBQUFBLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUlGLFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCLElBQUlKLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CO0lBQ2hJSSxrQkFBa0JWLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLEdBQUdOLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLENBQUNLLE1BQU0sR0FBRztBQUNqRztBQUVBLElBQUlDLFVBQThDO0FBRWxELDJCQUEyQjtBQUMzQixlQUFlQyx1QkFBdUJDLEVBQStCO0lBQ25FLElBQUk7UUFDRixNQUFNQSxHQUFHQyxVQUFVLENBQUMsU0FBU0MsS0FBSyxDQUFDLEdBQUdDLEdBQUc7UUFDekNwQixRQUFRQyxHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU9vQixXQUFXO1FBQ2xCckIsUUFBUXNCLElBQUksQ0FBQyx1Q0FBdUNELHFCQUFxQkUsUUFBUUYsVUFBVUcsT0FBTyxHQUFHQyxPQUFPSjtRQUM1R3JCLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0Y7QUFFQSxJQUFJO0lBQ0YsNENBQTRDO0lBQzVDLElBQUksQ0FBQ0UsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUIsSUFBSSxDQUFDRixRQUFRQyxHQUFHLENBQUNHLHFCQUFxQixJQUFJLENBQUNKLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLEVBQUU7UUFDL0dULFFBQVFDLEdBQUcsQ0FBQztRQUNaYyxVQUFVO0lBQ1osT0FBTztRQUNMLHVEQUF1RDtRQUN2RCxJQUFJbEIsMkRBQU9BLEdBQUdpQixNQUFNLEtBQUssR0FBRztZQUMxQixxQ0FBcUM7WUFDckMsSUFBSVksYUFBYXZCLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CO1lBRWpELHVDQUF1QztZQUN2QyxJQUFJaUIsV0FBV0MsVUFBVSxDQUFDLFFBQVFELFdBQVdFLFFBQVEsQ0FBQyxNQUFNO2dCQUMxREYsYUFBYUEsV0FBV0csS0FBSyxDQUFDLEdBQUcsQ0FBQztZQUNwQztZQUVBLGdEQUFnRDtZQUNoREgsYUFBYUEsV0FBV0ksT0FBTyxDQUFDLFFBQVE7WUFFeEMsa0NBQWtDO1lBQ2xDLElBQUksQ0FBQ0osV0FBV2YsUUFBUSxDQUFDLHdCQUF3QixDQUFDZSxXQUFXZixRQUFRLENBQUMsb0JBQW9CO2dCQUN4RixNQUFNLElBQUlZLE1BQU07WUFDbEI7WUFFQXZCLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU04QixpQkFBaUI7Z0JBQ3JCQyxXQUFXN0IsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUI7Z0JBQzFDNEIsYUFBYTlCLFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO2dCQUM5Q21CLFlBQVlBO1lBQ2Q7WUFFQSxNQUFNUSxNQUFNdEMsaUVBQWFBLENBQUM7Z0JBQ3hCdUMsWUFBWXJDLHdEQUFJQSxDQUFDaUM7Z0JBQ2pCQyxXQUFXN0IsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUI7WUFDNUM7WUFFQVUsVUFBVWhCLHNFQUFZQSxDQUFDbUM7WUFDdkJsQyxRQUFRQyxHQUFHLENBQUM7WUFFWixxQ0FBcUM7WUFDckNlLHVCQUF1QkQ7UUFDekIsT0FBTztZQUNMQSxVQUFVaEIsc0VBQVlBO1lBQ3RCQyxRQUFRQyxHQUFHLENBQUM7UUFDZDtJQUNGO0FBQ0YsRUFBRSxPQUFPbUMsT0FBTztJQUNkcEMsUUFBUW9DLEtBQUssQ0FBQywyQ0FBMkNBLGlCQUFpQmIsUUFBUWEsTUFBTVosT0FBTyxHQUFHQyxPQUFPVztJQUN6R3BDLFFBQVFDLEdBQUcsQ0FBQztJQUNaYyxVQUFVO0FBQ1o7QUFFbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3F1ZS1ib3QtcGxhdGZvcm0vLi9saWIvZmlyZWJhc2UtYWRtaW4udHM/NmE0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBnZXRBcHBzLCBjZXJ0IH0gZnJvbSAnZmlyZWJhc2UtYWRtaW4vYXBwJztcbmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gJ2ZpcmViYXNlLWFkbWluL2ZpcmVzdG9yZSc7XG5cbmNvbnNvbGUubG9nKCfwn5SNIEZpcmViYXNlIEFkbWluIGNyZWRlbnRpYWxzIGNoZWNrOicsIHtcbiAgaGFzUHJvamVjdElkOiAhIXByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gIGhhc0NsaWVudEVtYWlsOiAhIXByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCxcbiAgaGFzUHJpdmF0ZUtleTogISFwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWSxcbiAgaXNWYWxpZFByaXZhdGVLZXk6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZID8gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVkuaW5jbHVkZXMoJ0JFR0lOIFBSSVZBVEUgS0VZJykgOiBmYWxzZSxcbiAgaGFzVmFsaWRDcmVkZW50aWFsczogISEocHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCAmJiBwcm9jZXNzLmVudi5GSVJFQkFTRV9DTElFTlRfRU1BSUwgJiYgcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVkpLFxuICBwcml2YXRlS2V5TGVuZ3RoOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWSA/IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZLmxlbmd0aCA6IDBcbn0pO1xuXG5sZXQgYWRtaW5EYjogRmlyZWJhc2VGaXJlc3RvcmUuRmlyZXN0b3JlIHwgbnVsbCA9IG51bGw7XG5cbi8vIFRlc3QgRmlyZWJhc2UgY29ubmVjdGlvblxuYXN5bmMgZnVuY3Rpb24gdGVzdEZpcmViYXNlQ29ubmVjdGlvbihkYjogRmlyZWJhc2VGaXJlc3RvcmUuRmlyZXN0b3JlKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbignX3Rlc3QnKS5saW1pdCgxKS5nZXQoKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIEZpcmViYXNlIGNvbm5lY3Rpb24gdGVzdCBzdWNjZXNzZnVsJyk7XG4gIH0gY2F0Y2ggKHRlc3RFcnJvcikge1xuICAgIGNvbnNvbGUud2Fybign4pqg77iPIEZpcmViYXNlIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgdGVzdEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyB0ZXN0RXJyb3IubWVzc2FnZSA6IFN0cmluZyh0ZXN0RXJyb3IpKTtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBXaWxsIGZhbGxiYWNrIHRvIG1vY2sgZGF0YWJhc2UgZm9yIG9wZXJhdGlvbnMnKTtcbiAgfVxufVxuXG50cnkge1xuICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFsbCByZXF1aXJlZCBjcmVkZW50aWFsc1xuICBpZiAoIXByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQgfHwgIXByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCB8fCAhcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVkpIHtcbiAgICBjb25zb2xlLmxvZygn8J+aqyBGaXJlYmFzZSBBZG1pbiBkaXNhYmxlZCAtIG1pc3NpbmcgY3JlZGVudGlhbHMsIHVzaW5nIG1vY2sgZGF0YSBmb3IgZGV2ZWxvcG1lbnQnKTtcbiAgICBhZG1pbkRiID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICAvLyBJbml0aWFsaXplIEZpcmViYXNlIEFkbWluIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKGdldEFwcHMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIENsZWFuIGFuZCB2YWxpZGF0ZSB0aGUgcHJpdmF0ZSBrZXlcbiAgICAgIGxldCBwcml2YXRlS2V5ID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcHJpdmF0ZSBrZXkgZm9ybWF0c1xuICAgICAgaWYgKHByaXZhdGVLZXkuc3RhcnRzV2l0aCgnXCInKSAmJiBwcml2YXRlS2V5LmVuZHNXaXRoKCdcIicpKSB7XG4gICAgICAgIHByaXZhdGVLZXkgPSBwcml2YXRlS2V5LnNsaWNlKDEsIC0xKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVwbGFjZSBlc2NhcGVkIG5ld2xpbmVzIHdpdGggYWN0dWFsIG5ld2xpbmVzXG4gICAgICBwcml2YXRlS2V5ID0gcHJpdmF0ZUtleS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSBwcml2YXRlIGtleSBmb3JtYXRcbiAgICAgIGlmICghcHJpdmF0ZUtleS5pbmNsdWRlcygnQkVHSU4gUFJJVkFURSBLRVknKSB8fCAhcHJpdmF0ZUtleS5pbmNsdWRlcygnRU5EIFBSSVZBVEUgS0VZJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByaXZhdGUga2V5IGZvcm1hdCAtIG11c3QgY29udGFpbiBCRUdJTiBhbmQgRU5EIFBSSVZBVEUgS0VZIG1hcmtlcnMnKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ/CflKcgSW5pdGlhbGl6aW5nIEZpcmViYXNlIEFkbWluIHdpdGggY2xlYW5lZCBjcmVkZW50aWFscy4uLicpO1xuICAgICAgXG4gICAgICBjb25zdCBzZXJ2aWNlQWNjb3VudCA9IHtcbiAgICAgICAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lELFxuICAgICAgICBjbGllbnRFbWFpbDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMLFxuICAgICAgICBwcml2YXRlS2V5OiBwcml2YXRlS2V5LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcCh7XG4gICAgICAgIGNyZWRlbnRpYWw6IGNlcnQoc2VydmljZUFjY291bnQpLFxuICAgICAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gICAgICB9KTtcblxuICAgICAgYWRtaW5EYiA9IGdldEZpcmVzdG9yZShhcHApO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBGaXJlYmFzZSBBZG1pbiBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCB0aGUgY29ubmVjdGlvbiBhc3luY2hyb25vdXNseVxuICAgICAgdGVzdEZpcmViYXNlQ29ubmVjdGlvbihhZG1pbkRiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRtaW5EYiA9IGdldEZpcmVzdG9yZSgpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBGaXJlYmFzZSBBZG1pbiBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICB9XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCfinYwgRmlyZWJhc2UgQWRtaW4gaW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XG4gIGNvbnNvbGUubG9nKCfwn5qrIEZpcmViYXNlIEFkbWluIGRpc2FibGVkIC0gdXNpbmcgbW9jayBkYXRhIGZvciBkZXZlbG9wbWVudCcpO1xuICBhZG1pbkRiID0gbnVsbDtcbn1cblxuZXhwb3J0IHsgYWRtaW5EYiB9OyAiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUFwcCIsImdldEFwcHMiLCJjZXJ0IiwiZ2V0RmlyZXN0b3JlIiwiY29uc29sZSIsImxvZyIsImhhc1Byb2plY3RJZCIsInByb2Nlc3MiLCJlbnYiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiaGFzQ2xpZW50RW1haWwiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJoYXNQcml2YXRlS2V5IiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJpc1ZhbGlkUHJpdmF0ZUtleSIsImluY2x1ZGVzIiwiaGFzVmFsaWRDcmVkZW50aWFscyIsInByaXZhdGVLZXlMZW5ndGgiLCJsZW5ndGgiLCJhZG1pbkRiIiwidGVzdEZpcmViYXNlQ29ubmVjdGlvbiIsImRiIiwiY29sbGVjdGlvbiIsImxpbWl0IiwiZ2V0IiwidGVzdEVycm9yIiwid2FybiIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsInByaXZhdGVLZXkiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJzbGljZSIsInJlcGxhY2UiLCJzZXJ2aWNlQWNjb3VudCIsInByb2plY3RJZCIsImNsaWVudEVtYWlsIiwiYXBwIiwiY3JlZGVudGlhbCIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/firebase-admin.ts\n");

/***/ }),

/***/ "(api)/./lib/firebase.ts":
/*!*************************!*\
  !*** ./lib/firebase.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBhg_QAiNn65doXbbD7f-a7Q7s5i0Rqm_k\",\n    authDomain: \"askitai.firebaseapp.com\",\n    projectId: \"askitai\",\n    storageBucket: \"askitai.firebasestorage.app\",\n    messagingSenderId: \"946988582968\",\n    appId: \"1:946988582968:web:6d6a97b69ab0a61169becd\"\n};\n// Initialize Firebase only if not already initialized\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length === 0 ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig) : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(app);\nconsole.log(\"✅ Firebase client initialized with Auth\");\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZmlyZWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDSjtBQUNWO0FBRXhDLE1BQU1JLGlCQUFpQjtJQUNyQkMsUUFBUUMseUNBQXdDO0lBQ2hERyxZQUFZSCx5QkFBNEM7SUFDeERLLFdBQVdMLFNBQTJDO0lBQ3RETyxlQUFlUCw2QkFBK0M7SUFDOURTLG1CQUFtQlQsY0FBb0Q7SUFDdkVXLE9BQU9YLDJDQUF1QztBQUNoRDtBQUVBLHNEQUFzRDtBQUN0RCxNQUFNYSxNQUFNbEIscURBQU9BLEdBQUdtQixNQUFNLEtBQUssSUFBSXBCLDJEQUFhQSxDQUFDSSxrQkFBa0JILHFEQUFPQSxFQUFFLENBQUMsRUFBRTtBQUUxRSxNQUFNb0IsS0FBS25CLGdFQUFZQSxDQUFDaUIsS0FBSztBQUM3QixNQUFNRyxPQUFPbkIsc0RBQU9BLENBQUNnQixLQUFLO0FBRWpDSSxRQUFRQyxHQUFHLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3F1ZS1ib3QtcGxhdGZvcm0vLi9saWIvZmlyZWJhc2UudHM/NWQyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBnZXRBcHBzIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVksXG4gIGF1dGhEb21haW46IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VULFxuICBtZXNzYWdpbmdTZW5kZXJJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCxcbiAgYXBwSWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCxcbn07XG5cbi8vIEluaXRpYWxpemUgRmlyZWJhc2Ugb25seSBpZiBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuY29uc3QgYXBwID0gZ2V0QXBwcygpLmxlbmd0aCA9PT0gMCA/IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpIDogZ2V0QXBwcygpWzBdO1xuXG5leHBvcnQgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcbmV4cG9ydCBjb25zdCBhdXRoID0gZ2V0QXV0aChhcHApO1xuXG5jb25zb2xlLmxvZygn4pyFIEZpcmViYXNlIGNsaWVudCBpbml0aWFsaXplZCB3aXRoIEF1dGgnKTsgIl0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBcHBzIiwiZ2V0RmlyZXN0b3JlIiwiZ2V0QXV0aCIsImZpcmViYXNlQ29uZmlnIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkiLCJhdXRoRG9tYWluIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4iLCJwcm9qZWN0SWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEIiwic3RvcmFnZUJ1Y2tldCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUIiwibWVzc2FnaW5nU2VuZGVySWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIiwiYXBwSWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQiLCJhcHAiLCJsZW5ndGgiLCJkYiIsImF1dGgiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/firebase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/bots/by-owner/[ownerId].ts":
/*!**********************************************!*\
  !*** ./pages/api/bots/by-owner/[ownerId].ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database */ \"(api)/./lib/database/index.ts\");\n/* harmony import */ var _lib_auth_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth/server */ \"(api)/./lib/auth/server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst handler = async (req, res)=>{\n    console.log(\"API called, headers:\", req.headers); // DEBUG LOG\n    const { ownerId } = req.query;\n    const authenticatedUserId = req.user.uid;\n    const userPhoneNumber = req.user.phoneNumber;\n    // Ensure user can only access their own bots\n    if (!ownerId || typeof ownerId !== \"string\") {\n        return res.status(400).json({\n            success: false,\n            error: \"Owner ID is required\",\n            timestamp: new Date()\n        });\n    }\n    if (ownerId !== authenticatedUserId) {\n        return res.status(403).json({\n            success: false,\n            error: \"Access denied: You can only access your own bots\",\n            timestamp: new Date()\n        });\n    }\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\",\n            timestamp: new Date()\n        });\n    }\n    try {\n        console.log(\"\\uD83D\\uDCCB Fetching bots for authenticated user:\", authenticatedUserId);\n        console.log(\"\\uD83D\\uDCF1 User phone number:\", userPhoneNumber);\n        // Use the enhanced method that includes phone number fallback\n        const bots = await _lib_database__WEBPACK_IMPORTED_MODULE_0__.serverDb.getBotsByOwnerWithFallback(authenticatedUserId, userPhoneNumber);\n        console.log(\"✅ Found bots:\", bots.length);\n        console.log(\"Bots returned to client:\", bots); // DEBUG LOG\n        return res.status(200).json({\n            success: true,\n            data: bots,\n            timestamp: new Date()\n        });\n    } catch (error) {\n        console.error(\"❌ Error fetching bots by owner:\", error);\n        // Return empty array instead of error to prevent loading issues\n        return res.status(200).json({\n            success: true,\n            data: [],\n            timestamp: new Date()\n        });\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_auth_server__WEBPACK_IMPORTED_MODULE_1__.withAuth)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYm90cy9ieS1vd25lci9bb3duZXJJZF0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRTBDO0FBQ3lCO0FBTW5FLE1BQU1FLFVBQVUsT0FDZEMsS0FDQUM7SUFFQUMsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QkgsSUFBSUksT0FBTyxHQUFHLFlBQVk7SUFDOUQsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0wsSUFBSU0sS0FBSztJQUM3QixNQUFNQyxzQkFBc0JQLElBQUlRLElBQUksQ0FBQ0MsR0FBRztJQUN4QyxNQUFNQyxrQkFBa0JWLElBQUlRLElBQUksQ0FBQ0csV0FBVztJQUU1Qyw2Q0FBNkM7SUFDN0MsSUFBSSxDQUFDTixXQUFXLE9BQU9BLFlBQVksVUFBVTtRQUMzQyxPQUFPSixJQUFJVyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU87WUFDUEMsV0FBVyxJQUFJQztRQUNqQjtJQUNGO0lBRUEsSUFBSVosWUFBWUUscUJBQXFCO1FBQ25DLE9BQU9OLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEMsT0FBTztZQUNQQyxXQUFXLElBQUlDO1FBQ2pCO0lBQ0Y7SUFFQSxJQUFJakIsSUFBSWtCLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9qQixJQUFJVyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU87WUFDUEMsV0FBVyxJQUFJQztRQUNqQjtJQUNGO0lBRUEsSUFBSTtRQUNGZixRQUFRQyxHQUFHLENBQUMsc0RBQTRDSTtRQUN4REwsUUFBUUMsR0FBRyxDQUFDLG1DQUF5Qk87UUFFckMsOERBQThEO1FBQzlELE1BQU1TLE9BQU8sTUFBTXRCLG1EQUFRQSxDQUFDdUIsMEJBQTBCLENBQUNiLHFCQUFxQkc7UUFFNUVSLFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJnQixLQUFLRSxNQUFNO1FBQ3hDbkIsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QmdCLE9BQU8sWUFBWTtRQUUzRCxPQUFPbEIsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUUSxNQUFNSDtZQUNOSCxXQUFXLElBQUlDO1FBQ2pCO0lBRUYsRUFBRSxPQUFPRixPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pELGdFQUFnRTtRQUNoRSxPQUFPZCxJQUFJVyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RRLE1BQU0sRUFBRTtZQUNSTixXQUFXLElBQUlDO1FBQ2pCO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlbkIsMERBQVFBLENBQUNDLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3F1ZS1ib3QtcGxhdGZvcm0vLi9wYWdlcy9hcGkvYm90cy9ieS1vd25lci9bb3duZXJJZF0udHM/N2FkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IEJvdCwgQXBpUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IHNlcnZlckRiIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UnO1xuaW1wb3J0IHsgd2l0aEF1dGgsIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0IH0gZnJvbSAnQC9saWIvYXV0aC9zZXJ2ZXInO1xuXG5pbnRlcmZhY2UgQm90c1Jlc3BvbnNlIGV4dGVuZHMgQXBpUmVzcG9uc2Uge1xuICBkYXRhPzogQm90W107XG59XG5cbmNvbnN0IGhhbmRsZXIgPSBhc3luYyAoXG4gIHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPEJvdHNSZXNwb25zZT5cbikgPT4ge1xuICBjb25zb2xlLmxvZygnQVBJIGNhbGxlZCwgaGVhZGVyczonLCByZXEuaGVhZGVycyk7IC8vIERFQlVHIExPR1xuICBjb25zdCB7IG93bmVySWQgfSA9IHJlcS5xdWVyeTtcbiAgY29uc3QgYXV0aGVudGljYXRlZFVzZXJJZCA9IHJlcS51c2VyLnVpZDtcbiAgY29uc3QgdXNlclBob25lTnVtYmVyID0gcmVxLnVzZXIucGhvbmVOdW1iZXI7XG5cbiAgLy8gRW5zdXJlIHVzZXIgY2FuIG9ubHkgYWNjZXNzIHRoZWlyIG93biBib3RzXG4gIGlmICghb3duZXJJZCB8fCB0eXBlb2Ygb3duZXJJZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ093bmVyIElEIGlzIHJlcXVpcmVkJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKG93bmVySWQgIT09IGF1dGhlbnRpY2F0ZWRVc2VySWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0FjY2VzcyBkZW5pZWQ6IFlvdSBjYW4gb25seSBhY2Nlc3MgeW91ciBvd24gYm90cycsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBGZXRjaGluZyBib3RzIGZvciBhdXRoZW50aWNhdGVkIHVzZXI6JywgYXV0aGVudGljYXRlZFVzZXJJZCk7XG4gICAgY29uc29sZS5sb2coJ/Cfk7EgVXNlciBwaG9uZSBudW1iZXI6JywgdXNlclBob25lTnVtYmVyKTtcbiAgICBcbiAgICAvLyBVc2UgdGhlIGVuaGFuY2VkIG1ldGhvZCB0aGF0IGluY2x1ZGVzIHBob25lIG51bWJlciBmYWxsYmFja1xuICAgIGNvbnN0IGJvdHMgPSBhd2FpdCBzZXJ2ZXJEYi5nZXRCb3RzQnlPd25lcldpdGhGYWxsYmFjayhhdXRoZW50aWNhdGVkVXNlcklkLCB1c2VyUGhvbmVOdW1iZXIpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgRm91bmQgYm90czonLCBib3RzLmxlbmd0aCk7XG4gICAgY29uc29sZS5sb2coJ0JvdHMgcmV0dXJuZWQgdG8gY2xpZW50OicsIGJvdHMpOyAvLyBERUJVRyBMT0dcbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGJvdHMsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyBib3RzIGJ5IG93bmVyOicsIGVycm9yKTtcbiAgICAvLyBSZXR1cm4gZW1wdHkgYXJyYXkgaW5zdGVhZCBvZiBlcnJvciB0byBwcmV2ZW50IGxvYWRpbmcgaXNzdWVzXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBbXSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChoYW5kbGVyKTsgIl0sIm5hbWVzIjpbInNlcnZlckRiIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImhlYWRlcnMiLCJvd25lcklkIiwicXVlcnkiLCJhdXRoZW50aWNhdGVkVXNlcklkIiwidXNlciIsInVpZCIsInVzZXJQaG9uZU51bWJlciIsInBob25lTnVtYmVyIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInRpbWVzdGFtcCIsIkRhdGUiLCJtZXRob2QiLCJib3RzIiwiZ2V0Qm90c0J5T3duZXJXaXRoRmFsbGJhY2siLCJsZW5ndGgiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/bots/by-owner/[ownerId].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fbots%2Fby-owner%2F%5BownerId%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();